function setupConfig(e){var t=gbst.namespace("gbst.loan.app.loancalculator.translations");t.en=e}(function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["loan-repayment-calculator/templates/amortization-table"]=Handlebars.template(function(e,t,n,r,i){function h(e,t){var r="",i;return r+='\n			<tr>\n				<th headers="amortization-table-column1" class="payment-period">',(i=n.period)?i=i.call(e,{hash:{},data:t}):(i=e.period,i=typeof i===a?i.apply(e):i),r+=f(i)+'</th>\n				<td headers="amortization-table-column2">',(i=n.principalRemaining)?i=i.call(e,{hash:{},data:t}):(i=e.principalRemaining,i=typeof i===a?i.apply(e):i),r+=f(i)+'</td>\n				<td headers="amortization-table-column3">',(i=n.interestRemaining)?i=i.call(e,{hash:{},data:t}):(i=e.interestRemaining,i=typeof i===a?i.apply(e):i),r+=f(i)+'</td>\n				<td headers="amortization-table-column4">',(i=n.totalRemaining)?i=i.call(e,{hash:{},data:t}):(i=e.totalRemaining,i=typeof i===a?i.apply(e):i),r+=f(i)+"</td>\n			</tr>	\n			",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=this,c=n.blockHelperMissing;s+='<div class="amortization-content-panel">\n	<table id="gbst-amortization-table" class="amortization-table" summary="A table detailing each periodic payment on an amortizing loan">\n		<thead>\n			<tr>\n				<th class="payment-period">',(o=n.paymentPeriodHeader)?o=o.call(t,{hash:{},data:i}):(o=t.paymentPeriodHeader,o=typeof o===a?o.apply(t):o),s+=f(o)+"</th>\n				<th>",(o=n.principalHeader)?o=o.call(t,{hash:{},data:i}):(o=t.principalHeader,o=typeof o===a?o.apply(t):o),s+=f(o)+"</th>\n				<th>",(o=n.interestHeader)?o=o.call(t,{hash:{},data:i}):(o=t.interestHeader,o=typeof o===a?o.apply(t):o),s+=f(o)+"</th>\n				<th>",(o=n.balanceHeader)?o=o.call(t,{hash:{},data:i}):(o=t.balanceHeader,o=typeof o===a?o.apply(t):o),s+=f(o)+"</th>\n			</tr>\n		</thead>\n		<tbody>\n			",u={hash:{},inverse:l.noop,fn:l.program(1,h,i),data:i},(o=n.tableData)?o=o.call(t,u):(o=t.tableData,o=typeof o===a?o.apply(t):o),n.tableData||(o=c.call(t,o,u));if(o||o===0)s+=o;return s+='		\n		</tbody>\n	</table>\n\n	<button type="button" class="back">Back</button>\n	<button type="button" class="next">Next</button>\n\n</div>\n',s}),this.HandlebarsTemplates["loan-repayment-calculator/templates/amortization-table"]}).call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["loan-repayment-calculator/templates/app-template"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{};var s="",o,u="function";s+='<div class="gbst-loan-repayment">\n\n	<div class="title">\n		<h1>',(o=n.calculatorTitle)?o=o.call(t,{hash:{},data:i}):(o=t.calculatorTitle,o=typeof o===u?o.apply(t):o);if(o||o===0)s+=o;s+='</h1>\n		\n		<div class="info-panel">\n			<div class="button-wrapper"> \n				<button type="button" class="button info-icon" title="Information"></button>\n			</div>\n			\n			<div class="button-wrapper print"> \n				<button type="button" class="button print-icon" title="Print"></button>\n			</div>\n		</div>\n		\n		<div class="gbst-clear"></div>\n	</div>\n\n	<div class="content">\n		<div class="inputs-wrapper"></div>\n		\n		<div class="results-line">\n			<h3 class="results-title">',(o=n.resultsHeader)?o=o.call(t,{hash:{},data:i}):(o=t.resultsHeader,o=typeof o===u?o.apply(t):o);if(o||o===0)s+=o;s+='</h3>\n		</div>\n\n		<div class="results-wrapper">\n			<div class="displayType"></div>\n			<div class="chart-wrapper"></div>\n			<div class="amortization-table-wrapper"></div>\n			<div class="outputs-wrapper" role="region" aria-live="polite"></div>\n			<div class="gbst-clear"></div>\n		</div>\n\n		<div class="gbst-clear"></div>\n		<span class="calculator-disclaimer">',(o=n.disclaimer)?o=o.call(t,{hash:{},data:i}):(o=t.disclaimer,o=typeof o===u?o.apply(t):o);if(o||o===0)s+=o;return s+="</span>\n	</div>		\n</div>\n",s}),this.HandlebarsTemplates["loan-repayment-calculator/templates/app-template"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["loan-repayment-calculator/templates/chart-tooltip"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression;s+='<div class="arrow left"></div>\n\n<div class="chart-tooltip">\n	<div class="tooltip-title">',a={hash:{year:t.year},data:i},s+=l((o=n.I18n,o?o.call(t,"labels.chartTooltip.title",a):f.call(t,"I18n","labels.chartTooltip.title",a)))+'</div>\n\n	<div class="interest-remaining">\n		<span class="summary-label">',a={hash:{},data:i},s+=l((o=n.I18n,o?o.call(t,"labels.chart.interestRemaining",a):f.call(t,"I18n","labels.chart.interestRemaining",a)))+'</span>\n		<span class="summary-value">',a={hash:{precision:0},data:i},s+=l((o=n["I18n-$"],o?o.call(t,t.interestRemaining,a):f.call(t,"I18n-$",t.interestRemaining,a)))+'</span>\n		<div class="gbst-clear"></div>\n	</div>\n\n	<div class="principal-remaining">\n		<div class="symbol principal"></div>\n		<span class="summary-label">',a={hash:{},data:i},u=(o=n.I18n,o?o.call(t,"labels.chart.principalRemaining",a):f.call(t,"I18n","labels.chart.principalRemaining",a));if(u||u===0)s+=u;s+='</span>\n		<span class="summary-value">',a={hash:{precision:0},data:i},s+=l((o=n["I18n-$"],o?o.call(t,t.principalRemaining,a):f.call(t,"I18n-$",t.principalRemaining,a)))+'</span>\n		<div class="gbst-clear"></div>\n	</div>\n\n	<div class="line"></div>\n\n	<div class="total-remaining">\n		<div class="symbol total"></div>\n		<span class="summary-label">',a={hash:{},data:i},u=(o=n.I18n,o?o.call(t,"labels.chart.totalRemaining",a):f.call(t,"I18n","labels.chart.totalRemaining",a));if(u||u===0)s+=u;return s+='</span>\n		<span class="summary-value">',a={hash:{precision:0},data:i},s+=l((o=n["I18n-$"],o?o.call(t,t.totalRemaining,a):f.call(t,"I18n-$",t.totalRemaining,a)))+'</span>\n		<div class="gbst-clear"></div>\n	</div>\n</div>\n\n<div class="arrow right"></div>	\n',s}),this.HandlebarsTemplates["loan-repayment-calculator/templates/chart-tooltip"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["loan-repayment-calculator/templates/information-overlay-tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression;s+='<div id="information-overlay" class="modal-overlay">\n	<div class="wrapper">\n		<button type="button" class="close"></button>\n		<h2>',a={hash:{},data:i},s+=l((o=n.I18n,o?o.call(t,"labels.infoBox.title",a):f.call(t,"I18n","labels.infoBox.title",a)))+'</h2>\n		<div class="content">\n			',a={hash:{},data:i},u=(o=n.I18n,o?o.call(t,"labels.infoBox.content",a):f.call(t,"I18n","labels.infoBox.content",a));if(u||u===0)s+=u;return s+="\n		</div>\n	</div>\n</div>\n",s}),this.HandlebarsTemplates["loan-repayment-calculator/templates/information-overlay-tmpl"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["loan-repayment-calculator/templates/inputs-wrapper"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<div class="section">\n	<h2>\n		<span class="number-wrapper">1</span>\n		<span class="title-wrapper">',(o=n.title)?o=o.call(t,{hash:{},data:i}):(o=t.title,o=typeof o===u?o.apply(t):o),s+=a(o)+'</span>\n	</h2>  \n\n	<div class="expandable">\n		<ul class="controls-wrapper" role="presentation">\n			<li class="principal input-wrapper"></li>\n			<li class="repaymentType select-wrapper"></li>\n			<li class="frequency short-select-wrapper"></li>\n\n			<li class="interestRate slider-wrapper"></li>\n			<li class="term slider-wrapper"></li>\n			<div class="gbst-clear"></div>\n		</ul>\n	</div>\n</div>\n',s}),this.HandlebarsTemplates["loan-repayment-calculator/templates/inputs-wrapper"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["loan-repayment-calculator/templates/loan-chart"]=Handlebars.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{},'<div class="loan-chart"></div>\n'}),this.HandlebarsTemplates["loan-repayment-calculator/templates/loan-chart"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["loan-repayment-calculator/templates/outputs-wrapper"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=n.helperMissing;return s+='<div>\n	<div class="results-responsive">\n		<div class="results-arrow"></div>\n	\n		<div class="results-box frequency-result">\n			<div class="content">\n				<span class="label" tabindex="0">',(o=n.frequencyLabel)?o=o.call(t,{hash:{},data:i}):(o=t.frequencyLabel,o=typeof o===a?o.apply(t):o),s+=f(o)+'</span><br/>\n				<span class="value" tabindex="0">',u={hash:{precision:0,html:!0},data:i},s+=f((o=n["I18n-$"],o?o.call(t,t.pmt,u):l.call(t,"I18n-$",t.pmt,u)))+'</span>\n			</div>\n		</div>\n		\n		<div class="results-box total-result">\n			<div class="content">\n				<span class="label" tabindex="0">',u={hash:{},data:i},s+=f((o=n.I18n,o?o.call(t,"labels.results.totalInterest",u):l.call(t,"I18n","labels.results.totalInterest",u)))+'</span><br/>\n				<span class="value small" tabindex="0">',u={hash:{precision:0,html:!0},data:i},s+=f((o=n["I18n-$"],o?o.call(t,t.totalInterestPaid,u):l.call(t,"I18n-$",t.totalInterestPaid,u)))+'</span>\n			</div>\n		</div>	\n	</div>\n	\n	<div class="gbst-clear"></div>\n</div>\n',s}),this.HandlebarsTemplates["loan-repayment-calculator/templates/outputs-wrapper"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["loan-repayment-calculator/templates/style"]=Handlebars.template(function(e,t,n,r,i){function h(e,t){var r="",i;return r+="\n	.loan-calculator-app .inputs-wrapper h2 { \n		background-color: ",(i=n.subtitleBgColor)?i=i.call(e,{hash:{},data:t}):(i=e.subtitleBgColor,i=typeof i===a?i.apply(e):i),r+=f(i)+" !important; \n		color: ",(i=n.subtitleColor)?i=i.call(e,{hash:{},data:t}):(i=e.subtitleColor,i=typeof i===a?i.apply(e):i),r+=f(i)+" !important; \n	} \n	.loan-calculator-app .number-wrapper, .loan-calculator-app .results-line .results-title { \n		background-color: ",(i=n.secondaryColor)?i=i.call(e,{hash:{},data:t}):(i=e.secondaryColor,i=typeof i===a?i.apply(e):i),r+=f(i)+" !important; color: ",(i=n.titleColor)?i=i.call(e,{hash:{},data:t}):(i=e.titleColor,i=typeof i===a?i.apply(e):i),r+=f(i)+" !important; \n	} \n	.loan-calculator-app .info-panel .info-icon, .loan-calculator-app .info-panel .print-icon { \n		background-color: ",(i=n.primaryColor)?i=i.call(e,{hash:{},data:t}):(i=e.primaryColor,i=typeof i===a?i.apply(e):i),r+=f(i)+" !important; \n	} \n	.loan-calculator-app .info-panel .info-icon:hover, .loan-calculator-app .info-panel .print-icon:hover { \n		background-color: ",(i=n.hoverColor)?i=i.call(e,{hash:{},data:t}):(i=e.hoverColor,i=typeof i===a?i.apply(e):i),r+=f(i)+" !important; \n	} \n	.loan-calculator-app h1, .loan-calculator-app .standard-label, .loan-calculator-app input.range, \n	.loan-calculator-app .results-box span, .loan-calculator-app .modal-overlay, .loan-calculator-app .slider-label,\n	.loan-calculator-app .amortization-table-wrapper, .loan-calculator-app .chart-tooltip,\n	.loan-calculator-app span.ui-selectmenu-status { \n		color: ",(i=n.textColor)?i=i.call(e,{hash:{},data:t}):(i=e.textColor,i=typeof i===a?i.apply(e):i),r+=f(i)+" !important; \n	}\n	.loan-calculator-app .progress { \n		background-color: ",(i=n.primaryColor)?i=i.call(e,{hash:{},data:t}):(i=e.primaryColor,i=typeof i===a?i.apply(e):i),r+=f(i)+" !important; \n	}\n	.loan-calculator-app .displayType label {\n		color: ",(i=n.defaultColor)?i=i.call(e,{hash:{},data:t}):(i=e.defaultColor,i=typeof i===a?i.apply(e):i),r+=f(i)+" !important;\n		background-color: ",(i=n.transparentColor)?i=i.call(e,{hash:{},data:t}):(i=e.transparentColor,i=typeof i===a?i.apply(e):i),r+=f(i)+" !important;\n		border-color: ",(i=n.defaultColor)?i=i.call(e,{hash:{},data:t}):(i=e.defaultColor,i=typeof i===a?i.apply(e):i),r+=f(i)+";\n	}\n	.loan-calculator-app .displayType label.ui-state-active {\n		color: ",(i=n.secondaryColor)?i=i.call(e,{hash:{},data:t}):(i=e.secondaryColor,i=typeof i===a?i.apply(e):i),r+=f(i)+" !important;\n		background-color: ",(i=n.defaultColor)?i=i.call(e,{hash:{},data:t}):(i=e.defaultColor,i=typeof i===a?i.apply(e):i),r+=f(i)+" !important;\n		border-color: ",(i=n.defaultColor)?i=i.call(e,{hash:{},data:t}):(i=e.defaultColor,i=typeof i===a?i.apply(e):i),r+=f(i)+";\n	}\n	.loan-calculator-app .displayType label:hover {\n		background-color: ",(i=n.secondaryColor)?i=i.call(e,{hash:{},data:t}):(i=e.secondaryColor,i=typeof i===a?i.apply(e):i),r+=f(i)+" !important;\n		filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='",(i=n.secondaryStartColor)?i=i.call(e,{hash:{},data:t}):(i=e.secondaryStartColor,i=typeof i===a?i.apply(e):i),r+=f(i)+"' , endColorstr='",(i=n.secondaryEndColor)?i=i.call(e,{hash:{},data:t}):(i=e.secondaryEndColor,i=typeof i===a?i.apply(e):i),r+=f(i)+"') !important;\n		background: -webkit-gradient(linear, left top, left bottom, from(",(i=n.secondaryStartColor)?i=i.call(e,{hash:{},data:t}):(i=e.secondaryStartColor,i=typeof i===a?i.apply(e):i),r+=f(i)+"), to(",(i=n.secondaryEndColor)?i=i.call(e,{hash:{},data:t}):(i=e.secondaryEndColor,i=typeof i===a?i.apply(e):i),r+=f(i)+")) !important;\n		background: -moz-linear-gradient(top, ",(i=n.secondaryStartColor)?i=i.call(e,{hash:{},data:t}):(i=e.secondaryStartColor,i=typeof i===a?i.apply(e):i),r+=f(i)+", ",(i=n.secondaryEndColor)?i=i.call(e,{hash:{},data:t}):(i=e.secondaryEndColor,i=typeof i===a?i.apply(e):i),r+=f(i)+") !important;\n	} \n	.loan-calculator-app .displayType label.ui-state-active:hover {\n		cursor: default !important;\n		background: none !important;\n		filter: none !important;\n		background-color: ",(i=n.defaultColor)?i=i.call(e,{hash:{},data:t}):(i=e.defaultColor,i=typeof i===a?i.apply(e):i),r+=f(i)+" !important;\n	}\n	.loan-calculator-app .chart-tooltip .symbol.total {\n		background-color: ",(i=n.secondaryColor)?i=i.call(e,{hash:{},data:t}):(i=e.secondaryColor,i=typeof i===a?i.apply(e):i),r+=f(i)+" !important;\n		filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='",(i=n.secondaryStartColor)?i=i.call(e,{hash:{},data:t}):(i=e.secondaryStartColor,i=typeof i===a?i.apply(e):i),r+=f(i)+"' , endColorstr='",(i=n.secondaryEndColor)?i=i.call(e,{hash:{},data:t}):(i=e.secondaryEndColor,i=typeof i===a?i.apply(e):i),r+=f(i)+"') !important;\n		background: -webkit-gradient(linear, left top, left bottom, from(",(i=n.secondaryStartColor)?i=i.call(e,{hash:{},data:t}):(i=e.secondaryStartColor,i=typeof i===a?i.apply(e):i),r+=f(i)+"), to(",(i=n.secondaryEndColor)?i=i.call(e,{hash:{},data:t}):(i=e.secondaryEndColor,i=typeof i===a?i.apply(e):i),r+=f(i)+")) !important;\n		background: -moz-linear-gradient(top, ",(i=n.secondaryStartColor)?i=i.call(e,{hash:{},data:t}):(i=e.secondaryStartColor,i=typeof i===a?i.apply(e):i),r+=f(i)+", ",(i=n.secondaryEndColor)?i=i.call(e,{hash:{},data:t}):(i=e.secondaryEndColor,i=typeof i===a?i.apply(e):i),r+=f(i)+") !important;\n	}\n	.loan-calculator-app .chart-tooltip .symbol.principal {\n		background-color: ",(i=n.primaryColor)?i=i.call(e,{hash:{},data:t}):(i=e.primaryColor,i=typeof i===a?i.apply(e):i),r+=f(i)+" !important;\n		filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='",(i=n.startColor)?i=i.call(e,{hash:{},data:t}):(i=e.startColor,i=typeof i===a?i.apply(e):i),r+=f(i)+"' , endColorstr='",(i=n.endColor)?i=i.call(e,{hash:{},data:t}):(i=e.endColor,i=typeof i===a?i.apply(e):i),r+=f(i)+"') !important;\n		background: -webkit-gradient(linear, left top, left bottom, from(",(i=n.startColor)?i=i.call(e,{hash:{},data:t}):(i=e.startColor,i=typeof i===a?i.apply(e):i),r+=f(i)+"), to(",(i=n.endColor)?i=i.call(e,{hash:{},data:t}):(i=e.endColor,i=typeof i===a?i.apply(e):i),r+=f(i)+")) !important;\n		background: -moz-linear-gradient(top, ",(i=n.startColor)?i=i.call(e,{hash:{},data:t}):(i=e.startColor,i=typeof i===a?i.apply(e):i),r+=f(i)+", ",(i=n.endColor)?i=i.call(e,{hash:{},data:t}):(i=e.endColor,i=typeof i===a?i.apply(e):i),r+=f(i)+") !important;\n	}\n	.loan-calculator-app .amortization-content-panel button {\n		background-color: ",(i=n.secondaryColor)?i=i.call(e,{hash:{},data:t}):(i=e.secondaryColor,i=typeof i===a?i.apply(e):i),r+=f(i)+" !important;\n	} \n	",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=this,c=n.blockHelperMissing;s+="<style>\n	",u={hash:{},inverse:l.noop,fn:l.program(1,h,i),data:i},(o=n.colors)?o=o.call(t,u):(o=t.colors,o=typeof o===a?o.apply(t):o),n.colors||(o=c.call(t,o,u));if(o||o===0)s+=o;return s+="\n</style>\n",s}),this.HandlebarsTemplates["loan-repayment-calculator/templates/style"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["slider-input/templates/slider-input-templates"]=Handlebars.template(function(e,t,n,r,i){function h(e,t){var r="",i;return r+='<label class="slider-label" for="',(i=n.controlId)?i=i.call(e,{hash:{},data:t}):(i=e.controlId,i=typeof i===a?i.apply(e):i),r+=f(i)+'">',(i=n.title)?i=i.call(e,{hash:{},data:t}):(i=e.title,i=typeof i===a?i.apply(e):i),r+=f(i)+'</label><input id="',(i=n.controlId)?i=i.call(e,{hash:{},data:t}):(i=e.controlId,i=typeof i===a?i.apply(e):i),r+=f(i),r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=this,c=n.blockHelperMissing;u={hash:{},inverse:l.noop,fn:l.program(1,h,i),data:i},(o=n.templateData)?o=o.call(t,u):(o=t.templateData,o=typeof o===a?o.apply(t):o),n.templateData||(o=c.call(t,o,u));if(o||o===0)s+=o;return s+='" name="',(o=n.name)?o=o.call(t,{hash:{},data:i}):(o=t.name,o=typeof o===a?o.apply(t):o),s+=f(o)+'" type="range" required="true"></input>\n<div class="gbst-clear"></div>\n',s}),this.HandlebarsTemplates["slider-input/templates/slider-input-templates"]}.call(this),function(){Handlebars.registerPartial("selectmenu/templates/_select-control",Handlebars.template(function(e,t,n,r,i){function h(e,t){var r="",i;return r+='<select id="',(i=n.controlId)?i=i.call(e,{hash:{},data:t}):(i=e.controlId,i=typeof i===a?i.apply(e):i),r+=f(i)+'" name="',(i=n.name)?i=i.call(e,{hash:{},data:t}):(i=e.name,i=typeof i===a?i.apply(e):i),r+=f(i)+'" class="standard-input ',(i=n.controlClass)?i=i.call(e,{hash:{},data:t}):(i=e.controlClass,i=typeof i===a?i.apply(e):i),r+=f(i),r}function p(e,t){var r="",i,s;r+="\n		",s={hash:{},inverse:l.noop,fn:l.program(4,d,t),data:t},(i=n.listData)?i=i.call(e,s):(i=e.listData,i=typeof i===a?i.apply(e):i),n.listData||(i=c.call(e,i,s));if(i||i===0)r+=i;return r+="\n	",r}function d(e,t){var r="",i;return r+='\n			<option value="',(i=n.value)?i=i.call(e,{hash:{},data:t}):(i=e.value,i=typeof i===a?i.apply(e):i),r+=f(i)+'">',(i=n.label)?i=i.call(e,{hash:{},data:t}):(i=e.label,i=typeof i===a?i.apply(e):i),r+=f(i)+"</option>\n		",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=this,c=n.blockHelperMissing;u={hash:{},inverse:l.noop,fn:l.program(1,h,i),data:i},(o=n.templateData)?o=o.call(t,u):(o=t.templateData,o=typeof o===a?o.apply(t):o),n.templateData||(o=c.call(t,o,u));if(o||o===0)s+=o;s+='">\n	',u={hash:{},inverse:l.noop,fn:l.program(3,p,i),data:i},(o=n.controlData)?o=o.call(t,u):(o=t.controlData,o=typeof o===a?o.apply(t):o),n.controlData||(o=c.call(t,o,u));if(o||o===0)s+=o;return s+="\n</select>\n",s}))}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["selectmenu/templates/selectmenu-templates"]=Handlebars.template(function(e,t,n,r,i){function h(e,t){var r="",i;return r+='<label class="standard-label" for="',(i=n.controlId)?i=i.call(e,{hash:{},data:t}):(i=e.controlId,i=typeof i===a?i.apply(e):i),r+=f(i)+'">',(i=n.titleString)?i=i.call(e,{hash:{},data:t}):(i=e.titleString,i=typeof i===a?i.apply(e):i),r+=f(i)+"</label>",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials,i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=this,c=n.blockHelperMissing;u={hash:{},inverse:l.noop,fn:l.program(1,h,i),data:i},(o=n.templateData)?o=o.call(t,u):(o=t.templateData,o=typeof o===a?o.apply(t):o),n.templateData||(o=c.call(t,o,u));if(o||o===0)s+=o;s+="\n",o=l.invokePartial(r["selectmenu/templates/_select-control"],"selectmenu/templates/_select-control",t,n,r,i);if(o||o===0)s+=o;return s+='\n\n<div class="gbst-clear"></div>\n\n\n',s}),this.HandlebarsTemplates["selectmenu/templates/selectmenu-templates"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["standard-input/templates/standard-input-templates"]=Handlebars.template(function(e,t,n,r,i){function h(e,t){var r="",i;return r+='\n<label class="standard-label" for="',(i=n.controlId)?i=i.call(e,{hash:{},data:t}):(i=e.controlId,i=typeof i===a?i.apply(e):i),r+=f(i)+'">',(i=n.title)?i=i.call(e,{hash:{},data:t}):(i=e.title,i=typeof i===a?i.apply(e):i),r+=f(i)+'</label>\n<input id="',(i=n.controlId)?i=i.call(e,{hash:{},data:t}):(i=e.controlId,i=typeof i===a?i.apply(e):i),r+=f(i),r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=this,c=n.blockHelperMissing;u={hash:{},inverse:l.noop,fn:l.program(1,h,i),data:i},(o=n.templateData)?o=o.call(t,u):(o=t.templateData,o=typeof o===a?o.apply(t):o),n.templateData||(o=c.call(t,o,u));if(o||o===0)s+=o;return s+='" name="',(o=n.name)?o=o.call(t,{hash:{},data:i}):(o=t.name,o=typeof o===a?o.apply(t):o),s+=f(o)+'" maxlength="'+f((o=(o=(o=t.controlData,o==null||o===!1?o:o.inputData),o==null||o===!1?o:o.maxlength),typeof o===a?o.apply(t):o))+'" class="range standard-input" type="text"></input>\n<div class="gbst-clear"></div>\n',s}),this.HandlebarsTemplates["standard-input/templates/standard-input-templates"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["radiogroup-input/templates/radiogroup-input"]=Handlebars.template(function(e,t,n,r,i){function h(e,t){var r="",i,s;r+='\n	\n	<p class="radiogroup-label">',(i=n.title)?i=i.call(e,{hash:{},data:t}):(i=e.title,i=typeof i===a?i.apply(e):i),r+=f(i)+'</p>\n\n	<fieldset id="',(i=n.controlId)?i=i.call(e,{hash:{},data:t}):(i=e.controlId,i=typeof i===a?i.apply(e):i),r+=f(i)+'">\n		<legend>',(i=n.legend)?i=i.call(e,{hash:{},data:t}):(i=e.legend,i=typeof i===a?i.apply(e):i),r+=f(i)+"</legend>\n		",s={hash:{},inverse:l.noop,fn:l.program(2,p,t),data:t},(i=n.radiosData)?i=i.call(e,s):(i=e.radiosData,i=typeof i===a?i.apply(e):i),n.radiosData||(i=c.call(e,i,s));if(i||i===0)r+=i;return r+="\n	</fieldset>\n	\n	",r}function p(e,t){var r="",i;return r+='\n			<input type="radio" id="',(i=n.controlId)?i=i.call(e,{hash:{},data:t}):(i=e.controlId,i=typeof i===a?i.apply(e):i),r+=f(i)+'" name="',(i=n.name)?i=i.call(e,{hash:{},data:t}):(i=e.name,i=typeof i===a?i.apply(e):i),r+=f(i)+'" value="',(i=n.value)?i=i.call(e,{hash:{},data:t}):(i=e.value,i=typeof i===a?i.apply(e):i),r+=f(i)+'"/>\n			<label for="',(i=n.controlId)?i=i.call(e,{hash:{},data:t}):(i=e.controlId,i=typeof i===a?i.apply(e):i),r+=f(i)+'" class="',(i=n.clazz)?i=i.call(e,{hash:{},data:t}):(i=e.clazz,i=typeof i===a?i.apply(e):i),r+=f(i)+'">',(i=n.label)?i=i.call(e,{hash:{},data:t}):(i=e.label,i=typeof i===a?i.apply(e):i),r+=f(i)+"</label>\n		",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=this,c=n.blockHelperMissing;s+='<div class="radio">\n	',u={hash:{},inverse:l.noop,fn:l.program(1,h,i),data:i},(o=n.templateData)?o=o.call(t,u):(o=t.templateData,o=typeof o===a?o.apply(t):o),n.templateData||(o=c.call(t,o,u));if(o||o===0)s+=o;return s+="\n</div>\n",s}),this.HandlebarsTemplates["radiogroup-input/templates/radiogroup-input"]}.call(this),function(e){var t=gbst.namespace("gbst.loan.app.loancalculator.translations");I18n.translations=I18n.translations||{},I18n.translations.en=t.en}(jQuery),function(e){Handlebars.registerHelper("I18n",function(e,t){var n=t;t&&t.hash&&(n=t.hash);var r="";return I18n?e!=null?r=I18n.t(e,n):r="Invalid 'str' value":r=e,r}),Handlebars.registerHelper("I18n-$",function(t,n){var r=n;n&&n.hash&&(r=n.hash);if(r.html){var i=I18n.t("number.currency.format.htmlFormat");e.extend(r,{format:i})}var s="";return I18n?t!=null?s=I18n.toCurrency(t,r):s="Invalid 'str' value":s=t,new Handlebars.SafeString(s)})}(jQuery),function(e){var t=gbst.module("gbst.loan.app.loancalculator.config.chart");t.getChartConfig=function(t,n){var r={color:I18n.t("colors.textColor"),fontWeight:"bold",fontSize:"11px",fontFamily:"Arial, Verdana"},i={color:I18n.t("colors.textColor"),fontWeight:"bold",fontSize:"13px",fontFamily:"Arial, Verdana"},s={parentId:"loan-chart",chart:{backgroundColor:"rgba(255,255,255,0.5)",defaultSeriesType:"area",plotShadow:!1,reflow:!1,marginTop:40,spacingTop:0,spacingBottom:0,spacingRight:20,spacingLeft:10,borderRadius:0,renderTo:t,events:{load:n}},colors:["#0782be","#005c88"],credits:{enabled:!1},legend:{layout:"horizontal",backgroundColor:"rgba(255,255,255,0.33)",align:"right",verticalAlign:"top",x:0,y:5,floating:!0,borderRadius:5,borderWidth:0,itemStyle:{color:I18n.t("colors.textColor"),cursor:"default",fontWeight:"normal",fontSize:"12px",fontFamily:"Arial, Verdana"},itemHoverStyle:{color:I18n.t("colors.textColor")}},xAxis:{endOnTick:!0,labels:{style:r,y:20},lineColor:"#e1e1e1",lineWidth:1,maxPadding:0,min:0,title:{align:"middle",style:i,margin:20},tickColor:"#666666",tickPlacement:"on",tickPosition:"outside",tickWidth:2,tickLength:3},yAxis:{gridLineColor:"#e1e1e1",gridLineWidth:1,allowDecimals:!1,labels:{style:r},lineColor:"#e1e1e1",lineWidth:1,min:0,title:{style:i},tickColor:"#666666",tickPlacement:"on",tickPosition:"outside",tickWidth:2,tickLength:3},plotOptions:{series:{animation:!0,enableMouseTracking:!1,pointPadding:0,groupPadding:0,events:{legendItemClick:function(){return!1}}},area:{lineWidth:0,fillOpacity:1,connectNulls:!0,marker:{radius:0,lineWidth:0}}},title:{text:null}},o={title:{},xAxis:{title:{text:I18n.t("labels.chart.xAxis")}},yAxis:{title:{text:I18n.t("labels.chart.yAxis",{unit:I18n.t("number.currency.format.unit")})}},series:this.getChartSeries(),tooltip:{enabled:!1}};return e.extend(!0,s,o),s},t.getChartSeries=function(){return[{id:"totalRemaining",name:I18n.t("labels.chart.totalRemaining"),borderWidth:0,color:{linearGradient:[0,0,200,0],stops:[[0,lighterColor(I18n.t("colors.secondaryColor"),.1)],[1,darkerColor(I18n.t("colors.secondaryColor"),.1)]]},shadow:!1},{id:"principalRemaining",name:I18n.t("labels.chart.principalRemaining"),borderWidth:0,color:{linearGradient:[0,0,200,0],stops:[[0,lighterColor(I18n.t("colors.primaryColor"),.1)],[1,darkerColor(I18n.t("colors.primaryColor"),.1)]]},shadow:!1}]},t.tooltip={indicatorColor:"rgba(204, 204, 204, 0.3)",mouseOffsetX:5,mouseOffsetY:-30,touchOffsetX:0,touchOffsetY:-170}}(jQuery),function(e){var t=gbst.module("gbst.loan.app.loancalculator.config"),n=gbst.module("gbst.loan.app.loancalculator.model");n.ControlValues=Backbone.Model.extend({localStorage:null,defaults:I18n.t("defaults.values"),initialize:function(){window.localStorage&&(this.localStorage=new Store("gbst.loan.app.loancalculator"))},parse:function(t){return e.isArray(t)&&t.length>0&&(t=_.first(t)),t},getFrequency:function(){var e=this.get("frequency"),n=t.periods[e];if(!n)throw new Error("Missing frequency value for frequency type: '"+e+"'");return n},getDisplayType:function(){return this.get("displayType")},isDisplayTypeTable:function(){return this.getDisplayType()==t.displayType.TABLE}})}(jQuery),function(e){var t=gbst.module("gbst.loan.app.loancalculator.config"),n=gbst.module("gbst.loan.app.loancalculator.model"),r=gbst.module("gbst.loan.app.loancalculator.view"),i=gbst.module("gbst.loan.shared.view");n.ControlsDeclaration=function(){return[{name:"principal",view:i.StandardInputView,templateId:"standard-input/templates/standard-input-templates",templateData:{controlId:gbst.util.getNewId(),title:"labels.controls.principal",labelClass:"",controlClass:""},controlData:{inputData:I18n.t("defaults.controls.principal")},formatter:t.convertFn.moneyConverter_back,parser:t.convertFn.numberConverter},{name:"interestRate",view:i.SliderView,templateId:"slider-input/templates/slider-input-templates",templateData:{title:"labels.controls.interestRate",controlId:gbst.util.getNewId()},controlData:{sliderData:I18n.t("defaults.controls.interestRate")},formatter:t.convertFn.interestConverter_back,parser:t.convertFn.interestConverter},{name:"term",view:i.SliderView,templateId:"slider-input/templates/slider-input-templates",templateData:{title:"labels.controls.term",controlId:gbst.util.getNewId()},controlData:{sliderData:I18n.t("defaults.controls.term")},formatter:function(e){var t=I18n.t("labels.controls.termFormat",{count:e});return t},parser:t.convertFn.numberConverter},{name:"frequency",view:i.SelectmenuView,templateId:"selectmenu/templates/selectmenu-templates",templateData:{title:"labels.controls.frequency",controlId:gbst.util.getNewId()},controlData:{listData:I18n.t("defaults.controls.frequency")},parser:t.convertFn.numberConverter},{name:"repaymentType",elementSelector:".repaymentType",view:i.SelectmenuView,templateId:"selectmenu/templates/selectmenu-templates",templateData:{title:"labels.controls.repaymentType",controlId:gbst.util.getNewId(),controlClass:"long"},controlData:{listData:I18n.t("defaults.controls.repaymentType")}}]},n.DisplayTypeDeclaration=function(){return{name:"displayType",view:i.RadiogroupView,templateId:"radiogroup-input/templates/radiogroup-input",templateData:{controlId:gbst.util.getNewId(),title:"labels.controls.chartTableRadioButton",legend:"labels.controls.chartTableRadioButton",radiosData:[{controlId:gbst.util.getNewId(),name:"chart-table",value:t.displayType.GRAPH,label:I18n.t("labels.results.displayType.graph")},{controlId:gbst.util.getNewId(),name:"chart-table",value:t.displayType.TABLE,label:I18n.t("labels.results.displayType.table")}]}}}}(jQuery),function(e){var t=gbst.module("gbst.loan.app.loancalculator.model");t.LoanSummaryResult=function(){this.frequencyLabel="",this.pmt=0,this.totalInterestPaid=0,this.chartSummary=new t.ChartSummaryModel,this.amortizationSummary=[]},t.ChartSummaryModel=function(){this.principalRemaining=[],this.interestRemaining=[],this.totalRemaining=[],this.tooltipData=[]}}(jQuery),function(e){var t=gbst.module("gbst.loan.app.loancalculator.model");t.ResultsModel=Backbone.Model.extend({defaults:{amortizationSummary:[],chartSummary:null,frequency:"",pmt:-1,totalInterestPaid:-1}})}(jQuery),function(e){var t=gbst.module("gbst.loan.app.loancalculator.model");t.TableModel=Backbone.Model.extend({defaults:{currentIndex:0,maximumRowsPerPage:8,amortizationSummary:[]},getCurrentIndex:function(){return this.get("currentIndex")},setCurrentIndex:function(e){this.set("currentIndex",e)},getMaximumRowsPerPage:function(){return this.get("maximumRowsPerPage")},setMaximumRowsPerPage:function(e){this.set("maximumRowsPerPage",e)},getAmortizationSummary:function(){return this.get("amortizationSummary")},setAmortizationSummary:function(e){this.setCurrentIndex(0),this.set("amortizationSummary",e)},getCurrentSet:function(){var e=this.getCurrentIndex(),t=this.getMaximumRowsPerPage(),n=this.getAmortizationSummary(),r=[],i=0,s={precision:0};while(i<t&&e+i<n.length){var o=e+i,u=n[o],a={period:o,totalRemaining:I18n.toCurrency(u.totalRemaining,s),principalRemaining:I18n.toCurrency(u.principalRemaining,s),interestRemaining:I18n.toCurrency(u.interestRemaining,s)};r.push(a),i++}return r},getNextSet:function(){var e=this.getCurrentIndex(),t=this.getMaximumRowsPerPage(),n=e+t;this.setCurrentIndex(n)},getPreviousSet:function(){var e=this.getCurrentIndex(),t=this.getMaximumRowsPerPage(),n=e-t;n=n<0?0:n,this.setCurrentIndex(n)},isLastSet:function(){var e=this.getCurrentIndex(),t=this.getMaximumRowsPerPage(),n=this.getAmortizationSummary().length,r=e+t>n?!0:!1;return r},isFirstSet:function(){var e=this.getCurrentIndex(),t=e==0?!0:!1;return t}})}(jQuery);var pad=function(e,t){var n="0";e+="";while(e.length<t)e=n+e;return e},changeColor=function(e,t,n){e=e.replace(/^\s*|\s*$/,""),e=e.replace(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i,"#$1$1$2$2$3$3");var r=Math.round(t*256)*(n?-1:1),i=e.match(new RegExp("^rgba?\\(\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])\\s*,\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])\\s*,\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])(?:\\s*,\\s*(0|1|0?\\.\\d+))?\\s*\\)$"
,"i")),s=!i||i[4]==null?null:i[4],o=i?[i[1],i[2],i[3]]:e.replace(/^#?([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])/i,function(){return parseInt(arguments[1],16)+","+parseInt(arguments[2],16)+","+parseInt(arguments[3],16)}).split(/,/),u;return i?"rgb"+(s!==null?"a":"")+"("+Math[n?"max":"min"](parseInt(o[0],10)+r,n?0:255)+", "+Math[n?"max":"min"](parseInt(o[1],10)+r,n?0:255)+", "+Math[n?"max":"min"](parseInt(o[2],10)+r,n?0:255)+(s!==null?", "+s:"")+")":["#",pad(Math[n?"max":"min"](parseInt(o[0],10)+r,n?0:255).toString(16),2),pad(Math[n?"max":"min"](parseInt(o[1],10)+r,n?0:255).toString(16),2),pad(Math[n?"max":"min"](parseInt(o[2],10)+r,n?0:255).toString(16),2)].join("")},lighterColor=function(e,t){return changeColor(e,t,!1)},darkerColor=function(e,t){return changeColor(e,t,!0)};(function(e){var t=gbst.module("gbst.loan.app.loancalculator");t.DataLoader=function(){this.load=function(t){var n=e.ajax({type:"GET",url:t,cache:!1,dataType:"html",context:this}),r=n.promise();return r}}})(jQuery),function(e){var t=gbst.module("gbst.loan.app.loancalculator.util"),n=gbst.module("gbst.loan.app.loancalculator.model");t.LoanRepaymentUtil=function(){var e=gbst.module("gbst.loan.app.loancalculator.config"),t=gbst.module("gbst.calculations.base"),r="loanRepaymentResults";this.mapControlsToVO=function(e){var t=e.getFrequency(),n=null;return n={pv:parseInt(e.get("principal"),10),repaymentType:e.get("repaymentType"),frequency:t,frequencyValue:t,interestRate:e.get("interestRate"),term:e.get("term")},n},this.getLoan=function(e){var t=gbst.calculator(e).loan(),i=e.frequencyValue,s=t.isInterestOnly(),o=t.pmt({update:!0}),u=e.pv,a=t.totalPmt(),f=a-u;return s&&(f=a,a+=u),t.aggregate({reset:function(){this.loanSummaryResult=new n.LoanSummaryResult,this.chartSummary=this.loanSummaryResult.chartSummary,this.amortizationSummary=this.loanSummaryResult.amortizationSummary},updateResults:function(e,t,n){var r=Math.abs(t.outValues.pv),s=Math.abs(f-t.outValues.totals.interestEarned),o=Math.abs(a-t.outValues.totals.pmt);this.amortizationSummary.push({period:e,principalRemaining:r,interestRemaining:s,totalRemaining:o});if(e%i!=0)return;var u=e/i;this.chartSummary.principalRemaining.push({period:e,x:u,y:r}),this.chartSummary.interestRemaining.push({period:e,x:u,y:s}),this.chartSummary.totalRemaining.push({period:e,x:u,y:o}),this.chartSummary.tooltipData.push({year:u,totalRemaining:o,principalRemaining:r,interestRemaining:s})},finaliseResults:function(e,t,n){this.loanSummaryResult.pmt=o,this.loanSummaryResult.totalInterestPaid=f;var i=n.getStorage(r);i.result=this.loanSummaryResult,this.loanSummaryResult=null}}),t},this.calculate=function(e){var t=e.calculateLoan(),n=t.getStorage(r),i=n.result;return n.result=null,delete n.result,i}}}(jQuery),function(e){var t=gbst.module("gbst.common.util"),n=480,r=300;t.ResponsiveUtil={appElement:null,dispatcher:null,fixedWidth:-1,previousWidth:-1,Events:{RESIZE:"responsiveUtil.Resize"},device_size:[{style:"default_layout",range:{min:980,max:Number.POSITIVE_INFINITY}},{style:"portrait_tablets_layout",range:{min:768,max:979}},{style:"phones_to_tablets_layout",range:{min:481,max:767}},{style:"phones_layout",range:{min:0,max:n}}],init:function(t,r,i){this.appElement=t,this.dispatcher=r,this.fixedWidth=i,this.appElement.css("max-width",i),this.fixedWidth<=n&&this.appElement.addClass("phones_layout"),e(window).resize(_.debounce(e.proxy(this.setLayout,this),20)),this.setLayout()},getStyle:function(e){var t=_.find(this.device_size,function(t,n){return t.range.min<=e&&e<=t.range.max});return t.style},setLayout:function(){var e=this.appElement,t=e.parent().width();if(t<=r&&this.previousWidth<=r&&this.previousWidth>0)return;if(t==this.previousWidth)return;this.previousWidth=t;var n=this.getStyle(t);e.removeClass(function(e,t){return(t.match(/\w+_layout/g)||[]).join(" ")}).addClass(n),t<this.fixedWidth&&e.addClass("responsive_layout"),this.dispatcher.trigger(this.Events.RESIZE)}}}(jQuery),function(e){var t=gbst.module("gbst.loan.app.loancalculator.util.stylechange");t.applyStyleChanges=function(){var t=this.prepareContext(),n="loan-repayment-calculator/templates/style",r=HandlebarsTemplates[n](t);e("head").append(r)},t.prepareContext=function(){var e=I18n.t("colors");e.startColor=lighterColor(e.primaryColor,.03),e.hoverColor=e.endColor=darkerColor(e.primaryColor,.1),e.secondaryStartColor=lighterColor(e.secondaryColor,.03),e.secondaryEndColor=darkerColor(e.secondaryColor,.1),e.defaultColor=I18n.t("labels.results.displayType.borderColor"),e.transparentColor="transparent";var t={colors:e};return t},t.changeSelectmenuColor=function(t){var n=I18n.t("colors.textColor"),r=t.find("select").each(function(){e(this).data("selectmenu").list.css("color",n)})}}(jQuery),function(e){var t=gbst.module("gbst.loan.app.loancalculator.view");t.AmortizationTableView=Backbone.View.extend({templateId:"loan-repayment-calculator/templates/amortization-table",dispatcher:null,resultsModel:null,tableModel:null,events:{"click .next":"nextButton_handler","click .back":"backButton_handler"},initialize:function(t){this.controlsModel=t.controlsModel,this.tableModel=t.tableModel,this.resultsModel=t.resultsModel,this.resultsModel.on("change",e.proxy(this.updateTable_handler,this))},render:function(){this.verifyDisplayType();var e=this.prepareContext(),t=HandlebarsTemplates[this.templateId](e);return this.$el.empty().append(t),this.displayNextButton(),this.displayBackButton(),this},verifyDisplayType:function(){var e=this.$el;this.controlsModel.isDisplayTypeTable()?e.show():e.hide()},prepareContext:function(){var t=this.resultsModel.toJSON();t.tableData=this.tableModel.getCurrentSet();var n=this.getTableHeaders();return e.extend(t,n),t},getTableHeaders:function(){var e={},t="labels.results.amortizationTable";return e.paymentPeriodHeader=I18n.t(t+".paymentNumberHeader"),e.principalHeader=I18n.t(t+".principalHeader"),e.interestHeader=I18n.t(t+".interestHeader"),e.balanceHeader=I18n.t(t+".balanceHeader"),e},displayNextButton:function(){var e=this.$el,t=e.find(".next");this.tableModel.isLastSet()?t.hide():t.show()},displayBackButton:function(){var e=this.$el,t=e.find(".back");this.tableModel.isFirstSet()?t.hide():t.show()},updateTable_handler:function(e){var t=this.tableModel;t.setCurrentIndex(0);var n=this.resultsModel.toJSON();t.setAmortizationSummary(n.amortizationSummary),this.render()},nextButton_handler:function(e){this.tableModel.getNextSet(),this.render()},backButton_handler:function(e){this.tableModel.getPreviousSet(),this.render()}})}(jQuery),function(e){var t=gbst.module("gbst.loan.app.loancalculator"),n=gbst.module("gbst.loan.app.loancalculator.config.chart"),r=gbst.module("gbst.loan.app.loancalculator.view");r.ChartTooltipView=Backbone.View.extend({templateId:"loan-repayment-calculator/templates/chart-tooltip",wrapperClass:"chart-tooltip-wrapper",dispatcher:null,viewInitialised:!1,initialize:function(n){this.dispatcher=n.dispatcher,this.hide(),this.dispatcher.bind(t.Events.SHOW_CHART_TOOLTIP,e.proxy(this.showTooltip_handler,this)),this.dispatcher.bind(t.Events.HIDE_CHART_TOOLTIP,e.proxy(this.hideTooltip_handler,this))},render:function(){return this.$el.addClass(this.wrapperClass),this},show:function(){this.$el.show()},hide:function(){this.$el.hide()},showTooltip_handler:function(){},hideTooltip_handler:function(){},showData:function(e,t){var n=t[e],r=this.getTemplate(n);this.$el.empty().append(r)},getTemplate:function(e){var t=HandlebarsTemplates[this.templateId](e);return t}})}(jQuery),function(e){var t=gbst.module("gbst.loan.app.loancalculator.config"),n=gbst.module("gbst.loan.app.loancalculator.config.chart"),r=gbst.module("gbst.loan.app.loancalculator"),i=gbst.module("gbst.loan.app.loancalculator.view"),s=gbst.module("gbst.common.util");i.ChartView=Backbone.View.extend({resultsModel:null,dispatcher:null,templateId:"loan-repayment-calculator/templates/loan-chart",chartClass:"loan-chart",chartInstance:null,chartElement:null,tooltipView:null,hasPlotLine:!1,oldMouseOverIndex:null,tooltipData:null,initialize:function(t){this.dispatcher=e(t.dispatcher),this.createChartElements(this.$el),this.hideTooltip_proxy=e.proxy(this.hideTooltip,this),this.resultsModel=t.resultsModel,this.controlsModel=t.controlsModel,this.resultsModel.on("change",e.proxy(this.renderResults,this)),this.controlsModel.on("change:displayType",e.proxy(this.refreshGraph,this)),this.dispatcher.bind(s.ResponsiveUtil.Events.RESIZE,e.proxy(this.resizeGraph,this))},renderResults:function(){var e=this.resultsModel.get("chartSummary"),t=0,r=this.chartInstance,i=n.getChartSeries(),s=i.length,o=null,u=null,a=null;for(t=0;t<s;t++){u=i[t],o=r.get(u.id),a=e[u.id];if(!o)throw new Error("Could not find chart series ID='"+u.id+"'");o.setData(a,!1)}this.tooltipData=e.tooltipData,r.redraw()},render:function(){if(!this.viewInitialised){var e=this.controlsModel.get("displayType");e==t.displayType.GRAPH&&this.$el.show();var i=this,s=function(){i.dispatcher.trigger(r.Events.CHART_LOADED)},o=n.getChartConfig(this.chartElement[0],s);this.chartInstance=new Highcharts.Chart(o),this.initChartEvents(this.$el),this.viewInitialised=!0,e!=t.displayType.GRAPH&&this.$el.hide()}return this.tooltipView.render(),this},createChartElements:function(t){var n=gbst.util.getNewId(),r=HandlebarsTemplates[this.templateId]();r=e(r),r.attr("id",n),this.chartElement=r;var s=new i.ChartTooltipView({dispatcher:this.dispatcher});this.tooltipView=s,t.append(r,s.$el)},initChartEvents:function(n){var r=e.proxy(this.startTooltipTimer,this),i=e.proxy(this.chartTouchMouseMoveHandler,this);t.isTouchEnabled?(n.bind("touchstart touchmove",i),e(document).bind("touchstart",function(){r()})):(n.bind("mousemove",i),n.bind("mouseout",r))},chartTouchMouseMoveHandler:function(n){var r=this.chartInstance.series[0],i=r.xAxis,s=r.data,o=0,u=0,a=e(this.chartInstance.container).offset();if(!a)return;var f=n.originalEvent?n.originalEvent:{pageX:0,pageY:0};t.isTouchEnabled?(o=n.originalEvent.touches[0].pageX,u=n.originalEvent.touches[0].pageY):(o=n.pageX?n.pageX:f.pageX,u=n.pageY?n.pageY:f.pageY);var l=o-this.chartInstance.plotLeft-a.left,c=u-this.chartInstance.plotTop-a.top,h=Math.round(i.translate(l,!0));if(h>=0&&h<s.length){this.tooltipView.show(),this.oldMouseOverIndex!=h&&(this.oldMouseOverIndex=h,this.tooltipView.showData(h,this.tooltipData),this.tooltipShown=!0,this.showPlotLine(i,h));var p=o-a.left,d=u-a.top;this.positionTooltip(n,this.tooltipView,p,d),this.clearTooltipTimer()}else this.startTooltipTimer()},showPlotLine:function(e,t){this.hidePlotLine(e),e.addPlotLine({id:"mousePos",color:n.tooltip.indicatorColor,value:t,width:2,zIndex:15}),this.hasPlotLine=!0},hidePlotLine:function(e){if(!e){var t=this.chartInstance.series[0];e=t.xAxis}this.hasPlotLine&&(e.removePlotLine("mousePos"),this.hasPlotLine=!1)},positionTooltip:function(e,t,r,i){var s=t.$el,o=n.tooltip,u=e.type.indexOf("touch")>=0;u&&e.stopPropagation();var a=u?o.touchOffsetX:o.mouseOffsetX,f=u?o.touchOffsetY:o.mouseOffsetY,l=r+a,c=i+f,h=s.parent(),p=h.width(),d=h.height(),v=s.width(),m=s.height();v+l>p?(l=r-v-a,this.tooltipStyle==null&&(s.addClass("right"),this.tooltipStyle="right")):this.tooltipStyle!=null&&(s.removeClass("right"),this.tooltipStyle=null),l=Math.min(Math.max(-v,l),p-v),c=Math.min(Math.max(0,c),d-m),s.css({left:l,top:c})},startTooltipTimer:function(){this.clearTooltipTimer(),this.seriesMouseOutTimeoutId=setTimeout(this.hideTooltip_proxy,250)},clearTooltipTimer:function(){this.seriesMouseOutTimeoutId!=null&&(clearTimeout(this.seriesMouseOutTimeoutId),this.seriesMouseOutTimeoutId=null)},hideTooltip:function(){this.clearTooltipTimer(),this.tooltipView.hide(),this.hidePlotLine()},hideTooltip_proxy:null,refreshGraph:function(){var e=this.controlsModel.get("displayType");e==t.displayType.GRAPH&&(this.renderResults(),this.resizeGraph())},resizeGraph:function(){var e=this.controlsModel.get("displayType");if(e!=t.displayType.GRAPH)return;var n=this.chartInstance,r=this.chartElement.width(),i=this.chartElement.height();n.setSize(r,i,!1)}})}(jQuery),function(e){var t=gbst.module("gbst.loan.app.loancalculator"),n=gbst.module("gbst.loan.app.loancalculator.config"),r=gbst.module("gbst.loan.app.loancalculator.view"),i=gbst.module("gbst.loan.app.loancalculator.model"),s=gbst.module("gbst.loan.app.loancalculator.util.stylechange"),o=gbst.module("gbst.common.util");t.LoanCalculatorView=Backbone.View.extend({appTemplateId:"loan-repayment-calculator/templates/app-template",infoOverlayId:"loan-repayment-calculator/templates/information-overlay-tmpl",infoOverlayElement:null,dispatcher:null,viewInitialised:!1,controlsView:null,resultsView:null,chartView:null,displayTypeview:null,amortizationTableView:null,displayTypeFieldset:null,controlsModel:null,resultsModel:null,tableModel:null,events:{"click .info-icon":"infoClickHandler"},initialize:function(n){this.dispatcher=n.dispatcher,this.controlsModel=n.controlsModel,this.resultsModel=n.resultsModel,this.tableModel=n.tableModel,this.controlsModel.on("change:displayType",e.proxy(this.displayTypeHandler,this)),this.dispatcher.bind(t.Events.CHART_LOADED,e.proxy(this.registerCalculation,this)),this.dispatcher.bind(o.ResponsiveUtil.Events.RESIZE,e.proxy(this.resizeOverlay,this))},registerCalculation:function(){var e=this;_.defer(function(){e.dispatcher.trigger(t.Events.CALCULATE,[e.controlsModel,e.resultsModel])})},render:function(){var e=this.$el;s.applyStyleChanges();var t=this.showDisplayType=I18n.t("labels.results").showDisplayType;if(!this.viewInitialised){this.viewInitialised=!0;var n=this.prepareContext(),o=HandlebarsTemplates[this.appTemplateId](n);e.empty().append(o);var u=e.find("button.print-icon");u.click(function(){window.print()}),this.resultsElement=this.$el.find(".results-wrapper"),this.charElement=this.$el.find(".chart-wrapper"),this.tableElement=this.$el.find(".amortization-table-wrapper"),this.controlsView=new r.LoanControlsView({controlsModel:this.controlsModel,resultsModel:this.resultsModel,dispatcher:this.dispatcher,el:e.find(".inputs-wrapper")}),this.resultsView=new r.ResultsView({dispatcher:this.dispatcher,resultsModel:this.resultsModel,el:e.find(".outputs-wrapper")}),this.chartView=new r.ChartView({dispatcher:this.dispatcher,controlsModel:this.controlsModel,resultsModel:this.resultsModel,el:e.find(".chart-wrapper")});if(t){var a=i.DisplayTypeDeclaration(),f=a.elementSelector||"."+a.name;this.displayTypeView=new a.view({el:this.$el.find(f),dispatcher:this.dispatcher,controlConfig:a,model:this.controlsModel}),this.amortizationTableView=new r.AmortizationTableView({dispatcher:this.dispatcher,controlsModel:this.controlsModel,resultsModel:this.resultsModel,tableModel:this.tableModel,el:e.find(".amortization-table-wrapper")})}}return this.controlsView.render(),e.find(".gbst-loan-repayment").fadeIn(),this.resultsView.render(),this.chartView.render(),t&&(this.displayTypeView.render(),this.displayTypeFieldset=this.displayTypeView.$el.find("fieldset")),s.changeSelectmenuColor(e),this},prepareContext:function(){var e={};return e.calculatorTitle=I18n.t("labels.loanCalculator.calculatorTitle"),e.resultsHeader=I18n.t("labels.results.resultsHeader"),e.disclaimer=I18n.t("labels.loanCalculator.disclaimer"),e},infoClickHandler:function(t){var r=this.infoOverlayElement;if(r==null){var i=HandlebarsTemplates[this.infoOverlayId]();i=e(i),this.$el.append(i),r=this.infoOverlayElement=i.overlay(n.infoOverlayConfig)}return r.overlay().load(),this.resizeOverlay(),r.css({top:0,left:0}),!1},resizeOverlay:function(){if(!this.infoOverlayElement)return;if(this.infoOverlayElement.is(":hidden"))return;var e=parseInt(this.$el.css("height"),10)-14;this.infoOverlayElement.css("height",e);var t=parseInt(this.$el.css("width"),10)-14;this.infoOverlayElement.css("width",t);var n=this.infoOverlayElement.find(".content");n.css("height",e-120)},displayTypeHandler:function(e){var r=e.get("displayType");r==n.displayType.GRAPH?(this.charElement.show(),this.dispatcher.triggerHandler(t.Events.CALCULATE,[this.controlsModel,this.resultsModel]),this.tableElement.hide()):(this.charElement.hide(),this.tableElement.show())}})}(jQuery),function(e){var t=gbst.module("gbst.loan.app.loancalculator"),n=gbst.module("gbst.loan.app.loancalculator.config"),r=gbst.module("gbst.loan.app.loancalculator.model"),i=gbst.module("gbst.loan.app.loancalculator.view");i.LoanControlsView=Backbone.View.extend({templateId:"loan-repayment-calculator/templates/inputs-wrapper",dispatcher:null,controlsModel:null,controlsDeclaration:null,controlsList:null,events:{},initialize:function(t){this.dispatcher=e(t.dispatcher),this.controlsModel=t.controlsModel,this.controlsDeclaration=r.ControlsDeclaration()},createControls:function(e,t){var n=0,r=null,i=e.length,s=null,o=null,u=[];for(n=0;n<i;n++)s=e[n],r=s.elementSelector||"."+s.name,o=new s.view({el:this.$el.find(r),dispatcher:this.dispatcher,controlConfig:s,model:t}),u.push(o);return u},render:function(){var e=0,t=0,n=this.controlsList,r=null,i=null;this.controlsCreated||(r=this.prepareContext(),i=HandlebarsTemplates[this.templateId](r),this.$el.empty().append(i),n=this.controlsList=this.createControls(this.controlsDeclaration,this.controlsModel),this.controlsCreated=!0),t=n.length;for(e=0;e<t;e++)n[e].render();return this},calculateClick_handler:function(e){this.dispatcher.triggerHandler(t.Events.CALCULATE,this.controlsModel)},prepareContext:function(){var e={};return e.title=I18n.t("labels.controls.title"),e}})}(jQuery),function(e){var t=gbst.module("gbst.loan.app.loancalculator.view");t.ResultsView=Backbone.View.extend({templateId:"loan-repayment-calculator/templates/outputs-wrapper",resultsModel:null,initialize:function(t){this.resultsModel=t.resultsModel,this.resultsModel.on("change",e.proxy(this.renderResults,this))},renderResults:function(){var t=this.resultsModel.toJSON();t.frequencyLabel=this.getFrequencyLabel();var n=e(HandlebarsTemplates[this.templateId](t));this.$el.empty().append(n)},getFrequencyLabel:function(){var e=I18n.t("defaults.controls.frequency"),t=this.resultsModel.get("frequency"),n=_.find(e,function(e,n){return e.value==t}),r=null;return n&&(r=I18n.t("labels.results.regularRepayment",{frequencyLabel:n.label})),r}})}(jQuery),function(e){var t=gbst.module("gbst.loan.app.loancalculator"),n=gbst.module("gbst.loan.app.loancalculator.control");n.APIController=function(){this.inputs=null,this.results=null,this.init=function(e,t,n){this.inputs=e,this.results=t,n&&this.restoreCalc(n)},this.getValues=function(){var e={inputs:this.inputs.toJSON(),results:this.results.toJSON()};return e},this.restoreCalc=function(e){this.inputs.set(e)}}}($),function(e){var t=gbst.module("gbst.loan.app.loancalculator.config");I18n.defaultLocale="en",I18n.fallbacks=!0,t.style={styleSelectMenu:!0},t.infoOverlayConfig={fixed:!1,top:"0%",left:"0px"},t.periods={month:12,fortnight:26,week:52},t.displayType={GRAPH:"GRAPH",TABLE:"TABLE"},t.convertFn={numberConverter:function(e){var t=I18n.t("number.format.separator"),n=gbst.util.NumberUtil.parseNumber(e,t);return n},moneyConverter_back:function(e,t,n){var r=I18n.toCurrency(e,{precision:0});return r},listConverter:function(e){return e},listConverter_back:function(e){return[e]},interestConverter:function(e){var t=I18n.t("number.format.separator"),n=gbst.util.NumberUtil.parseNumber(e,t);return n},interestConverter_back:function(e){var t=I18n.toPercentage(e,{precision:2});return t}},t.isTouchEnabled=Modernizr.touch}(jQuery),function(e){var t=gbst.module("gbst.loan.app.loancalculator"),n=gbst.module("gbst.loan.app.loancalculator.model"),r=gbst.module("gbst.loan.app.loancalculator.util"),i=gbst.module("gbst.loan.app.loancalculator.control"),s=gbst.module("gbst.common.util");t.Events={CALCULATE:"loancalculator.calculate",SHOW_CHART_TOOLTIP:"loancalculator.showChartTooltip",HIDE_CHART_TOOLTIP:"loancalculator.hideChartTooltip",CONTROL_CHANGE:"loancalculator.control.change",CHART_LOADED:"loancalculator.chartLoaded"},t.LoanCalculatorApp=function(o){this.dispatcher=e({}),this.parentEl=o,this.mainView=null,this.controlsModel=null,this.resultsModel=null,this.tableModel=null,this.apiController=null,this.storageAvailable=!1,this.init=function(t){if(t)this.options=t;else{var n=e.url().param("calc_settings");n&&(n=decodeURI(n),this.options=JSON.parse(n))}var r=614;s.ResponsiveUtil.init(this.parentEl,this.dispatcher,r),this.setupMainView()},this.setupMainView=function(){this.storageAvailable=window.localStorage!=null,this.controlsModel=new n.ControlValues,this.resultsModel=new n.ResultsModel,this.tableModel=new n.TableModel,this.apiController=new i.APIController,this.apiController.init(this.controlsModel,this.resultsModel,this.options),this.dispatcher.bind(t.Events.CONTROL_CHANGE,e.proxy(this.controlsChangeHandler,this)),this.initEvents(this.dispatcher),this.mainView=new t.LoanCalculatorView({dispatcher:this.dispatcher,controlsModel:this.controlsModel,resultsModel:this.resultsModel,tableModel:this.tableModel}),this.parentEl.append(this.mainView.$el),this.mainView.render()},this.initEvents=function(n){n.bind(t.Events.CALCULATE,e.proxy(this.calculate_handler,this));var r=this,i=_.debounce(function(){r.calculate(r.controlsModel,r.resultsModel)},100);this.controlsModel.on("change",i,this)},this.calculate_handler=function(e,t,n){this.calculate(t,n)},this.restorePreviousValues=function(){if(this.storageAvailable){var e=this;this.controlsModel.fetch({success:function(){e.mainView.render(),e.calculate(e.controlsModel,e.resultsModel)}})}},this.calculate=function(e,t){var n=this.calculateResults(e);t.set(n)},this.calculateResults=function(e){var t=new r.LoanRepaymentUtil,n=t.mapControlsToVO(e),i=t.getLoan(n),s=t.calculate(i),o=_.extend({frequency:e.get("frequency")},s);return this.results=o,o},this.controlsChangeHandler=function(){this.storageAvailable&&this.controlsModel.save()},this.getCurrentValues=function(){return this.apiController.getValues()}}}(jQuery);