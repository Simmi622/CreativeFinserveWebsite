function setupConfig(e){var t=gbst.namespace("gbst.loan.app.loancomparisoncalculator.translations");t.en=e}(function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["loan-comparison-calculator/templates/app-template"]=Handlebars.template(function(e,t,n,r,i){function p(e,t){var r="",i;r+='\n		<span class="calculator-disclaimer">',(i=n.disclaimer)?i=i.call(e,{hash:{},data:t}):(i=e.disclaimer,i=typeof i===f?i.apply(e):i);if(i||i===0)r+=i;return r+="</span>\n		",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{};var s="",o,u,a,f="function",l=n.helperMissing,c=this.escapeExpression,h=this;s+='<div class="gbst-loan-repayment">\n	<div class="title">\n		<h1>',a={hash:{},data:i},s+=c((o=n.I18n,o?o.call(t,"labels.loanCalculator.calculatorTitle",a):l.call(t,"I18n","labels.loanCalculator.calculatorTitle",a)))+'</h1>\n		\n		<div class="info-panel">\n			<div class="button-wrapper print"> \n				<button type="button" class="button print-icon" title="Print"></button>\n			</div>\n		</div>\n		\n		<div class="gbst-clear"></div>\n	</div>\n\n	<div class="content">\n		<div class="inputs-wrapper">\n			<h2>\n				<span class="number-wrapper">1</span>\n				<span class="title-wrapper">',a={hash:{},data:i},s+=c((o=n.I18n,o?o.call(t,"labels.loanCommonDetailsView.controlsTitle",a):l.call(t,"I18n","labels.loanCommonDetailsView.controlsTitle",a)))+'</span>\n			</h2>\n			<div class="expandable">\n				<div class="common-loan-details"></div>\n				<div class="shared-loans-wrapper">\n					<div class="tabs"></div>\n					<div class="loan-details-panel"></div>\n					<div class="loan-details-panel"></div>\n				</div>\n				<div class="gbst-clear"></div>\n			</div>\n		</div>\n			\n		<div class="results-line">\n			<h3 class="results-title">',a={hash:{},data:i},s+=c((o=n.I18n,o?o.call(t,"labels.resultsView.resultsHeader",a):l.call(t,"I18n","labels.resultsView.resultsHeader",a)))+'</h3>\n		</div>\n		\n		<div class="results-wrapper">\n			<div class="chart-wrapper"></div>\n			<div class="outputs-wrapper" role="region" aria-live="polite"></div>\n			<div class="gbst-clear"></div>\n		</div>\n			\n		<div class="gbst-clear"></div>\n		',u=n["if"].call(t,t.disclaimer,{hash:{},inverse:h.noop,fn:h.program(1,p,i),data:i});if(u||u===0)s+=u;return s+="\n	</div>	\n</div>\n",s}),this.HandlebarsTemplates["loan-comparison-calculator/templates/app-template"]}).call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["loan-comparison-calculator/templates/chart-tooltip"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression;s+='<div class="arrow left"></div>\n\n<div class="chart-tooltip">\n	<div class="tooltip-title">',a={hash:{year:t.year},data:i},s+=l((o=n.I18n,o?o.call(t,"labels.chartTooltip.title",a):f.call(t,"I18n","labels.chartTooltip.title",a)))+'</div>\n\n	<div class="total-remaining">\n		<div class="symbol total"></div>\n		<span class="summary-label">',a={hash:{},data:i},u=(o=n.I18n,o?o.call(t,"labels.chartView.totalAccumulatedTitle",a):f.call(t,"I18n","labels.chartView.totalAccumulatedTitle",a));if(u||u===0)s+=u;return s+='</span>\n		<span class="summary-value">',a={hash:{precision:0},data:i},s+=l((o=n["I18n-$"],o?o.call(t,t.totalAccumulated,a):f.call(t,"I18n-$",t.totalAccumulated,a)))+'</span>\n		<div class="gbst-clear"></div>\n	</div>\n\n</div>\n\n<div class="arrow right"></div>	\n',s}),this.HandlebarsTemplates["loan-comparison-calculator/templates/chart-tooltip"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["loan-comparison-calculator/templates/common-loan-details"]=Handlebars.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{},'<div class="section">\n	<ul class="controls-wrapper">\n		<li class="loanAmount"></li>\n		<li class="loanTerm slider-wrapper"></li>\n		<div class="gbst-clear"></div>\n	</ul>\n	<div class="gbst-clear"></div>\n</div>\n'}),this.HandlebarsTemplates["loan-comparison-calculator/templates/common-loan-details"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["loan-comparison-calculator/templates/information-overlay-tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression;s+='<div id="information-overlay" class="modal-overlay">\n	<div class="wrapper">\n		<button type="button" class="close"></button>\n		<h2>',a={hash:{},data:i},s+=l((o=n.I18n,o?o.call(t,"labels.infoBox.title",a):f.call(t,"I18n","labels.infoBox.title",a)))+'</h2>\n		<div class="content">\n			',a={hash:{},data:i},u=(o=n.I18n,o?o.call(t,"labels.infoBox.content",a):f.call(t,"I18n","labels.infoBox.content",a));if(u||u===0)s+=u;return s+="\n		</div>\n	</div>\n</div>\n",s}),this.HandlebarsTemplates["loan-comparison-calculator/templates/information-overlay-tmpl"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["loan-comparison-calculator/templates/loan-chart"]=Handlebars.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{},'<div class="loan-chart"></div>\n'}),this.HandlebarsTemplates["loan-comparison-calculator/templates/loan-chart"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["loan-comparison-calculator/templates/loan-details-panel"]=Handlebars.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{},'<div class="section details-panel">\n	\n	<ul class="controls-wrapper long initial-margin">\n		<li class="upfrontFees input-wrapper"></li>\n		<li class="ongoingRate slider-wrapper"></li>\n		<li>\n			<div class="ongoingFees slider-wrapper"></div>\n			<div class="ongoingFeesFrequency fees-frequency"></div>\n		</li>\n		<div class="gbst-clear"></div>\n		<li class="introductoryRateCheckBox intro-checkbox"></li>\n	</ul>\n	\n	<div class="gbst-clear"></div>\n	<div class="introductoryPanel">\n		<ul class="controls-wrapper intro">	\n			<li class="introductoryRate slider-wrapper"></li>\n			<li class="introductoryTerm slider-wrapper"></li>\n			<div class="gbst-clear"></div>\n		</ul>\n	</div>\n	\n</div>\n'}),this.HandlebarsTemplates["loan-comparison-calculator/templates/loan-details-panel"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["loan-comparison-calculator/templates/outputs-wrapper"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=n.helperMissing;return s+='<div>\n	\n	<div class="results-responsive">\n		<div class="results-arrow"></div>\n		<div class="results-box frequency-result">\n			<div class="result-content">\n				<span class="label" tabindex="0">',(o=n.loanSavingsLabel)?o=o.call(t,{hash:{},data:i}):(o=t.loanSavingsLabel,o=typeof o===a?o.apply(t):o),s+=f(o)+'</span><br/>\n				<span class="value" tabindex="0">',u={hash:{precision:0,html:!0},data:i},s+=f((o=n["I18n-$"],o?o.call(t,t.loanSavings,u):l.call(t,"I18n-$",t.loanSavings,u)))+'</span>\n			</div>\n		</div>\n		<div class="results-box total-result">\n			<div class="result-content">\n				<ul role="presentation">\n					<li id="repayment" role="presentation">\n						<span class="label group-title" tabindex="0" >',u={hash:{},data:i},s+=f((o=n.I18n,o?o.call(t,"labels.resultsView.introRepaymentLabel",u):l.call(t,"I18n","labels.resultsView.introRepaymentLabel",u)))+'</span>\n\n						<div>\n							<span class="label" tabindex="0">',u={hash:{},data:i},s+=f((o=n.I18n,o?o.call(t,"labels.resultsView.loan1Label",u):l.call(t,"I18n","labels.resultsView.loan1Label",u)))+'</span>\n							<span class="value small" tabindex="0" >',u={hash:{precision:0,html:!0},data:i},s+=f((o=n["I18n-$"],o?o.call(t,(o=t.resultsLoan1,o==null||o===!1?o:o.introPmt),u):l.call(t,"I18n-$",(o=t.resultsLoan1,o==null||o===!1?o:o.introPmt),u)))+'</span>\n							<div class="gbst-clear"></div>\n						</div>	\n\n						<div>\n							<span class="label" tabindex="0">',u={hash:{},data:i},s+=f((o=n.I18n,o?o.call(t,"labels.resultsView.loan2Label",u):l.call(t,"I18n","labels.resultsView.loan2Label",u)))+'</span>\n							<span class="value small" tabindex="0">',u={hash:{precision:0,html:!0},data:i},s+=f((o=n["I18n-$"],o?o.call(t,(o=t.resultsLoan2,o==null||o===!1?o:o.introPmt),u):l.call(t,"I18n-$",(o=t.resultsLoan2,o==null||o===!1?o:o.introPmt),u)))+'</span>\n							<div class="gbst-clear"></div>\n						</div>	\n					</li>\n\n					<hr/>\n\n					<li id="repayment" role="presentation">\n						<span class="label group-title" tabindex="0">',u={hash:{},data:i},s+=f((o=n.I18n,o?o.call(t,"labels.resultsView.ongoingRepaymentLabel",u):l.call(t,"I18n","labels.resultsView.ongoingRepaymentLabel",u)))+'</span>\n\n						<div>\n							<span class="label" tabindex="0">',u={hash:{},data:i},s+=f((o=n.I18n,o?o.call(t,"labels.resultsView.loan1Label",u):l.call(t,"I18n","labels.resultsView.loan1Label",u)))+'</span>\n							<span class="value small" tabindex="0">',u={hash:{precision:0,html:!0},data:i},s+=f((o=n["I18n-$"],o?o.call(t,(o=t.resultsLoan1,o==null||o===!1?o:o.ongoingPmt),u):l.call(t,"I18n-$",(o=t.resultsLoan1,o==null||o===!1?o:o.ongoingPmt),u)))+'</span>\n							<div class="gbst-clear"></div>\n						</div>\n\n						<div>\n							<span class="label" tabindex="0">',u={hash:{},data:i},s+=f((o=n.I18n,o?o.call(t,"labels.resultsView.loan2Label",u):l.call(t,"I18n","labels.resultsView.loan2Label",u)))+'</span>\n							<span class="value small" tabindex="0">',u={hash:{precision:0,html:!0},data:i},s+=f((o=n["I18n-$"],o?o.call(t,(o=t.resultsLoan2,o==null||o===!1?o:o.ongoingPmt),u):l.call(t,"I18n-$",(o=t.resultsLoan2,o==null||o===!1?o:o.ongoingPmt),u)))+'</span>\n							<div class="gbst-clear"></div>\n						</div>	\n					</li>\n\n					<hr/>\n\n					<li id="repayment" role="presentation">\n						<span class="label group-title" tabindex="0">',u={hash:{},data:i},s+=f((o=n.I18n,o?o.call(t,"labels.resultsView.totalPayableLabel",u):l.call(t,"I18n","labels.resultsView.totalPayableLabel",u)))+'</span>\n\n						<div>\n							<span class="label" tabindex="0">',u={hash:{},data:i},s+=f((o=n.I18n,o?o.call(t,"labels.resultsView.loan1Label",u):l.call(t,"I18n","labels.resultsView.loan1Label",u)))+'</span>\n							<span class="value small" tabindex="0" >',u={hash:{precision:0,html:!0},data:i},s+=f((o=n["I18n-$"],o?o.call(t,(o=t.resultsLoan1,o==null||o===!1?o:o.totalPaidBack),u):l.call(t,"I18n-$",(o=t.resultsLoan1,o==null||o===!1?o:o.totalPaidBack),u)))+'</span>\n							<div class="gbst-clear"></div>\n						</div>	\n						<div>\n							<span class="label" tabindex="0" >',u={hash:{},data:i},s+=f((o=n.I18n,o?o.call(t,"labels.resultsView.loan2Label",u):l.call(t,"I18n","labels.resultsView.loan2Label",u)))+'</span>\n							<span class="value small" tabindex="0" >',u={hash:{precision:0,html:!0},data:i},s+=f((o=n["I18n-$"],o?o.call(t,(o=t.resultsLoan2,o==null||o===!1?o:o.totalPaidBack),u):l.call(t,"I18n-$",(o=t.resultsLoan2,o==null||o===!1?o:o.totalPaidBack),u)))+'</span>\n							<div class="gbst-clear"></div>\n						</div>	\n					</li>\n				</ul>\n			</div>\n		</div>	\n	</div>\n</div>\n',s}),this.HandlebarsTemplates["loan-comparison-calculator/templates/outputs-wrapper"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["loan-comparison-calculator/templates/style"]=Handlebars.template(function(e,t,n,r,i){function h(e,t){var r="",i;return r+="\n	.loan-comparison-calculator-app .inputs-wrapper h2 {\n		background-color: ",(i=n.subtitleBgColor)?i=i.call(e,{hash:{},data:t}):(i=e.subtitleBgColor,i=typeof i===a?i.apply(e):i),r+=f(i)+" !important;\n		color: ",(i=n.subtitleColor)?i=i.call(e,{hash:{},data:t}):(i=e.subtitleColor,i=typeof i===a?i.apply(e):i),r+=f(i)+" !important;\n	}\n	.loan-comparison-calculator-app .number-wrapper, .loan-comparison-calculator-app .results-line .results-title {\n		background-color: ",(i=n.secondaryColor)?i=i.call(e,{hash:{},data:t}):(i=e.secondaryColor,i=typeof i===a?i.apply(e):i),r+=f(i)+" !important;\n		color: ",(i=n.titleColor)?i=i.call(e,{hash:{},data:t}):(i=e.titleColor,i=typeof i===a?i.apply(e):i),r+=f(i)+" !important; \n	}\n	.loan-comparison-calculator-app .info-panel .info-icon, .loan-comparison-calculator-app .info-panel .print-icon {\n		background-color: ",(i=n.primaryColor)?i=i.call(e,{hash:{},data:t}):(i=e.primaryColor,i=typeof i===a?i.apply(e):i),r+=f(i)+" !important;\n	}\n	.loan-comparison-calculator-app .slider-wrapper .progress {\n		background-color: ",(i=n.primaryColor)?i=i.call(e,{hash:{},data:t}):(i=e.primaryColor,i=typeof i===a?i.apply(e):i),r+=f(i)+" !important;\n	}\n	.loan-comparison-calculator-app .info-panel .info-icon:hover, .loan-comparison-calculator-app .info-panel .print-icon:hover {\n		background-color: ",(i=n.hoverColor)?i=i.call(e,{hash:{},data:t}):(i=e.hoverColor,i=typeof i===a?i.apply(e):i),r+=f(i)+" !important; \n	}\n	.loan-comparison-calculator-app h1, .loan-comparison-calculator-app .standard-label, .loan-comparison-calculator-app input.range,\n	.loan-comparison-calculator-app .radio-buttons-label, .loan-comparison-calculator-app .slider-label,\n	.loan-comparison-calculator-app .results-box span, .loan-comparison-calculator-app .modal-overlay, .loan-comparison-calculator-app .currentTaxThresholds,\n	.loan-comparison-calculator-app span.ui-selectmenu-status, .loan-comparison-calculator-app .checkbox-label span,\n	.loan-comparison-calculator-app .amortization-table-wrapper, .loan-comparison-calculator-app .chart-tooltip {\n		color: ",(i=n.textColor)?i=i.call(e,{hash:{},data:t}):(i=e.textColor,i=typeof i===a?i.apply(e):i),r+=f(i)+" !important;\n	}\n	.loan-comparison-calculator-app .displayType label {\n		color: ",(i=n.defaultColor)?i=i.call(e,{hash:{},data:t}):(i=e.defaultColor,i=typeof i===a?i.apply(e):i),r+=f(i)+" !important;\n		background-color: ",(i=n.transparentColor)?i=i.call(e,{hash:{},data:t}):(i=e.transparentColor,i=typeof i===a?i.apply(e):i),r+=f(i)+" !important;\n		border-color: ",(i=n.defaultColor)?i=i.call(e,{hash:{},data:t}):(i=e.defaultColor,i=typeof i===a?i.apply(e):i),r+=f(i)+";\n	}\n	.loan-comparison-calculator-app .displayType label.ui-state-active {\n		color: ",(i=n.secondaryColor)?i=i.call(e,{hash:{},data:t}):(i=e.secondaryColor,i=typeof i===a?i.apply(e):i),r+=f(i)+" !important;\n		background-color: ",(i=n.defaultColor)?i=i.call(e,{hash:{},data:t}):(i=e.defaultColor,i=typeof i===a?i.apply(e):i),r+=f(i)+" !important;\n		border-color: ",(i=n.defaultColor)?i=i.call(e,{hash:{},data:t}):(i=e.defaultColor,i=typeof i===a?i.apply(e):i),r+=f(i)+";\n	}\n	.loan-comparison-calculator-app .displayType label.ui-state-hover {\n		background-color: ",(i=n.secondaryColor)?i=i.call(e,{hash:{},data:t}):(i=e.secondaryColor,i=typeof i===a?i.apply(e):i),r+=f(i)+" !important;\n		filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='",(i=n.secondaryStartColor)?i=i.call(e,{hash:{},data:t}):(i=e.secondaryStartColor,i=typeof i===a?i.apply(e):i),r+=f(i)+"' , endColorstr='",(i=n.secondaryEndColor)?i=i.call(e,{hash:{},data:t}):(i=e.secondaryEndColor,i=typeof i===a?i.apply(e):i),r+=f(i)+"') !important;\n		background: -webkit-gradient(linear, left top, left bottom, from(",(i=n.secondaryStartColor)?i=i.call(e,{hash:{},data:t}):(i=e.secondaryStartColor,i=typeof i===a?i.apply(e):i),r+=f(i)+"), to(",(i=n.secondaryEndColor)?i=i.call(e,{hash:{},data:t}):(i=e.secondaryEndColor,i=typeof i===a?i.apply(e):i),r+=f(i)+")) !important;\n		background: -moz-linear-gradient(top, ",(i=n.secondaryStartColor)?i=i.call(e,{hash:{},data:t}):(i=e.secondaryStartColor,i=typeof i===a?i.apply(e):i),r+=f(i)+", ",(i=n.secondaryEndColor)?i=i.call(e,{hash:{},data:t}):(i=e.secondaryEndColor,i=typeof i===a?i.apply(e):i),r+=f(i)+") !important;\n	} \n	.loan-comparison-calculator-app .displayType label.ui-state-active.ui-state-hover {\n		cursor: default !important;\n		background: none !important;\n		filter: none !important;\n		background-color: ",(i=n.defaultColor)?i=i.call(e,{hash:{},data:t}):(i=e.defaultColor,i=typeof i===a?i.apply(e):i),r+=f(i)+" !important;\n	}\n	.loan-comparison-calculator-app .symbol.total {\n		background-color: ",(i=n.primaryColor)?i=i.call(e,{hash:{},data:t}):(i=e.primaryColor,i=typeof i===a?i.apply(e):i),r+=f(i)+" !important;\n		filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='",(i=n.startColor)?i=i.call(e,{hash:{},data:t}):(i=e.startColor,i=typeof i===a?i.apply(e):i),r+=f(i)+"' , endColorstr='",(i=n.endColor)?i=i.call(e,{hash:{},data:t}):(i=e.endColor,i=typeof i===a?i.apply(e):i),r+=f(i)+"') !important;\n		background: -webkit-gradient(linear, left top, left bottom, from(",(i=n.startColor)?i=i.call(e,{hash:{},data:t}):(i=e.startColor,i=typeof i===a?i.apply(e):i),r+=f(i)+"), to(",(i=n.endColor)?i=i.call(e,{hash:{},data:t}):(i=e.endColor,i=typeof i===a?i.apply(e):i),r+=f(i)+")) !important;\n		background: -moz-linear-gradient(top, ",(i=n.startColor)?i=i.call(e,{hash:{},data:t}):(i=e.startColor,i=typeof i===a?i.apply(e):i),r+=f(i)+", ",(i=n.endColor)?i=i.call(e,{hash:{},data:t}):(i=e.endColor,i=typeof i===a?i.apply(e):i),r+=f(i)+") !important;\n	} \n\n	.loan-comparison-calculator-app .tab a {\n		color: ",(i=n.primaryColor)?i=i.call(e,{hash:{},data:t}):(i=e.primaryColor,i=typeof i===a?i.apply(e):i),r+=f(i)+" !important;\n		background: none !important;\n	}\n\n	.loan-comparison-calculator-app .tab a.current {\n		background: ",(i=n.primaryColor)?i=i.call(e,{hash:{},data:t}):(i=e.primaryColor,i=typeof i===a?i.apply(e):i),r+=f(i)+" !important;\n		color: #FFFFFF !important;\n	}\n	",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=this,c=n.blockHelperMissing;s+="<style>\n	",u={hash:{},inverse:l.noop,fn:l.program(1,h,i),data:i},(o=n.colors)?o=o.call(t,u):(o=t.colors,o=typeof o===a?o.apply(t):o),n.colors||(o=c.call(t,o,u));if(o||o===0)s+=o;return s+="\n</style>\n",s}),this.HandlebarsTemplates["loan-comparison-calculator/templates/style"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["loan-comparison-calculator/templates/tabs"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<ul class="tab-list">\n	<li class="tab tab-loan-1"><a id="loan1" value="0" class="current" tabindex="0">',u={hash:{},data:i},s+=f((o=n.I18n,o?o.call(t,"labels.loan1.title",u):a.call(t,"I18n","labels.loan1.title",u)))+'</a></li>\n	<li class="tab tab-loan-2"><a id="loan2" value="1" tabindex="0">',u={hash:{},data:i},s+=f((o=n.I18n,o?o.call(t,"labels.loan2.title",u):a.call(t,"I18n","labels.loan2.title",u)))+'</a></li>\n	<div class="gbst-clear"></div>\n</ul>\n',s}),this.HandlebarsTemplates["loan-comparison-calculator/templates/tabs"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["slider-input/templates/slider-input-templates"]=Handlebars.template(function(e,t,n,r,i){function h(e,t){var r="",i;return r+='<label class="slider-label" for="',(i=n.controlId)?i=i.call(e,{hash:{},data:t}):(i=e.controlId,i=typeof i===a?i.apply(e):i),r+=f(i)+'">',(i=n.title)?i=i.call(e,{hash:{},data:t}):(i=e.title,i=typeof i===a?i.apply(e):i),r+=f(i)+'</label><input id="',(i=n.controlId)?i=i.call(e,{hash:{},data:t}):(i=e.controlId,i=typeof i===a?i.apply(e):i),r+=f(i),r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=this,c=n.blockHelperMissing;u={hash:{},inverse:l.noop,fn:l.program(1,h,i),data:i},(o=n.templateData)?o=o.call(t,u):(o=t.templateData,o=typeof o===a?o.apply(t):o),n.templateData||(o=c.call(t,o,u));if(o||o===0)s+=o;return s+='" name="',(o=n.name)?o=o.call(t,{hash:{},data:i}):(o=t.name,o=typeof o===a?o.apply(t):o),s+=f(o)+'" type="range" required="true"></input>\n<div class="gbst-clear"></div>\n',s}),this.HandlebarsTemplates["slider-input/templates/slider-input-templates"]}.call(this),function(){Handlebars.registerPartial("selectmenu/templates/_select-control",Handlebars.template(function(e,t,n,r,i){function h(e,t){var r="",i;return r+='<select id="',(i=n.controlId)?i=i.call(e,{hash:{},data:t}):(i=e.controlId,i=typeof i===a?i.apply(e):i),r+=f(i)+'" name="',(i=n.name)?i=i.call(e,{hash:{},data:t}):(i=e.name,i=typeof i===a?i.apply(e):i),r+=f(i)+'" class="standard-input ',(i=n.controlClass)?i=i.call(e,{hash:{},data:t}):(i=e.controlClass,i=typeof i===a?i.apply(e):i),r+=f(i),r}function p(e,t){var r="",i,s;r+="\n		",s={hash:{},inverse:l.noop,fn:l.program(4,d,t),data:t},(i=n.listData)?i=i.call(e,s):(i=e.listData,i=typeof i===a?i.apply(e):i),n.listData||(i=c.call(e,i,s));if(i||i===0)r+=i;return r+="\n	",r}function d(e,t){var r="",i;return r+='\n			<option value="',(i=n.value)?i=i.call(e,{hash:{},data:t}):(i=e.value,i=typeof i===a?i.apply(e):i),r+=f(i)+'">',(i=n.label)?i=i.call(e,{hash:{},data:t}):(i=e.label,i=typeof i===a?i.apply(e):i),r+=f(i)+"</option>\n		",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=this,c=n.blockHelperMissing;u={hash:{},inverse:l.noop,fn:l.program(1,h,i),data:i},(o=n.templateData)?o=o.call(t,u):(o=t.templateData,o=typeof o===a?o.apply(t):o),n.templateData||(o=c.call(t,o,u));if(o||o===0)s+=o;s+='">\n	',u={hash:{},inverse:l.noop,fn:l.program(3,p,i),data:i},(o=n.controlData)?o=o.call(t,u):(o=t.controlData,o=typeof o===a?o.apply(t):o),n.controlData||(o=c.call(t,o,u));if(o||o===0)s+=o;return s+="\n</select>\n",s}))}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["selectmenu/templates/selectmenu-templates"]=Handlebars.template(function(e,t,n,r,i){function h(e,t){var r="",i;return r+='<label class="standard-label" for="',(i=n.controlId)?i=i.call(e,{hash:{},data:t}):(i=e.controlId,i=typeof i===a?i.apply(e):i),r+=f(i)+'">',(i=n.titleString)?i=i.call(e,{hash:{},data:t}):(i=e.titleString,i=typeof i===a?i.apply(e):i),r+=f(i)+"</label>",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials,i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=this,c=n.blockHelperMissing;u={hash:{},inverse:l.noop,fn:l.program(1,h,i),data:i},(o=n.templateData)?o=o.call(t,u):(o=t.templateData,o=typeof o===a?o.apply(t):o),n.templateData||(o=c.call(t,o,u));if(o||o===0)s+=o;s+="\n",o=l.invokePartial(r["selectmenu/templates/_select-control"],"selectmenu/templates/_select-control",t,n,r,i);if(o||o===0)s+=o;return s+='\n\n<div class="gbst-clear"></div>\n\n\n',s}),this.HandlebarsTemplates["selectmenu/templates/selectmenu-templates"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["standard-input/templates/standard-input-templates"]=Handlebars.template(function(e,t,n,r,i){function h(e,t){var r="",i;return r+='\n<label class="standard-label" for="',(i=n.controlId)?i=i.call(e,{hash:{},data:t}):(i=e.controlId,i=typeof i===a?i.apply(e):i),r+=f(i)+'">',(i=n.title)?i=i.call(e,{hash:{},data:t}):(i=e.title,i=typeof i===a?i.apply(e):i),r+=f(i)+'</label>\n<input id="',(i=n.controlId)?i=i.call(e,{hash:{},data:t}):(i=e.controlId,i=typeof i===a?i.apply(e):i),r+=f(i),r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=this,c=n.blockHelperMissing;u={hash:{},inverse:l.noop,fn:l.program(1,h,i),data:i},(o=n.templateData)?o=o.call(t,u):(o=t.templateData,o=typeof o===a?o.apply(t):o),n.templateData||(o=c.call(t,o,u));if(o||o===0)s+=o;return s+='" name="',(o=n.name)?o=o.call(t,{hash:{},data:i}):(o=t.name,o=typeof o===a?o.apply(t):o),s+=f(o)+'" maxlength="'+f((o=(o=(o=t.controlData,o==null||o===!1?o:o.inputData),o==null||o===!1?o:o.maxlength),typeof o===a?o.apply(t):o))+'" class="range standard-input" type="text"></input>\n<div class="gbst-clear"></div>\n',s}),this.HandlebarsTemplates["standard-input/templates/standard-input-templates"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["radiogroup-input/templates/radiogroup-input"]=Handlebars.template(function(e,t,n,r,i){function h(e,t){var r="",i,s;r+='\n	\n	<p class="radiogroup-label">',(i=n.title)?i=i.call(e,{hash:{},data:t}):(i=e.title,i=typeof i===a?i.apply(e):i),r+=f(i)+'</p>\n\n	<fieldset id="',(i=n.controlId)?i=i.call(e,{hash:{},data:t}):(i=e.controlId,i=typeof i===a?i.apply(e):i),r+=f(i)+'">\n		<legend>',(i=n.legend)?i=i.call(e,{hash:{},data:t}):(i=e.legend,i=typeof i===a?i.apply(e):i),r+=f(i)+"</legend>\n		",s={hash:{},inverse:l.noop,fn:l.program(2,p,t),data:t},(i=n.radiosData)?i=i.call(e,s):(i=e.radiosData,i=typeof i===a?i.apply(e):i),n.radiosData||(i=c.call(e,i,s));if(i||i===0)r+=i;return r+="\n	</fieldset>\n	\n	",r}function p(e,t){var r="",i;return r+='\n			<input type="radio" id="',(i=n.controlId)?i=i.call(e,{hash:{},data:t}):(i=e.controlId,i=typeof i===a?i.apply(e):i),r+=f(i)+'" name="',(i=n.name)?i=i.call(e,{hash:{},data:t}):(i=e.name,i=typeof i===a?i.apply(e):i),r+=f(i)+'" value="',(i=n.value)?i=i.call(e,{hash:{},data:t}):(i=e.value,i=typeof i===a?i.apply(e):i),r+=f(i)+'"/>\n			<label for="',(i=n.controlId)?i=i.call(e,{hash:{},data:t}):(i=e.controlId,i=typeof i===a?i.apply(e):i),r+=f(i)+'" class="',(i=n.clazz)?i=i.call(e,{hash:{},data:t}):(i=e.clazz,i=typeof i===a?i.apply(e):i),r+=f(i)+'">',(i=n.label)?i=i.call(e,{hash:{},data:t}):(i=e.label,i=typeof i===a?i.apply(e):i),r+=f(i)+"</label>\n		",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=this,c=n.blockHelperMissing;s+='<div class="radio">\n	',u={hash:{},inverse:l.noop,fn:l.program(1,h,i),data:i},(o=n.templateData)?o=o.call(t,u):(o=t.templateData,o=typeof o===a?o.apply(t):o),n.templateData||(o=c.call(t,o,u));if(o||o===0)s+=o;return s+="\n</div>\n",s}),this.HandlebarsTemplates["radiogroup-input/templates/radiogroup-input"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["checkbox-input/templates/checkbox-input-templates"]=Handlebars.template(function(e,t,n,r,i){function h(e,t){var r="",i;return r+='\n<input id="',(i=n.controlId)?i=i.call(e,{hash:{},data:t}):(i=e.controlId,i=typeof i===a?i.apply(e):i),r+=f(i),r}function p(e,t){var r="",i;return r+='\n<label class="checkbox-label" for="',(i=n.controlId)?i=i.call(e,{hash:{},data:t}):(i=e.controlId,i=typeof i===a?i.apply(e):i),r+=f(i)+'">',(i=n.titleString)?i=i.call(e,{hash:{},data:t}):(i=e.titleString,i=typeof i===a?i.apply(e):i),r+=f(i)+"</label>\n",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=this,c=n.blockHelperMissing;s+='<div class="check-box-input">\n',u={hash:{},inverse:l.noop,fn:l.program(1,h,i),data:i},(o=n.templateData)?o=o.call(t,u):(o=t.templateData,o=typeof o===a?o.apply(t):o),n.templateData||(o=c.call(t,o,u));if(o||o===0)s+=o;s+='" name="',(o=n.name)?o=o.call(t,{hash:{},data:i}):(o=t.name,o=typeof o===a?o.apply(t):o),s+=f(o)+'" class="checkbox-input" type="checkbox" value="',(o=n.name)?o=o.call(t,{hash:{},data:i}):(o=t.name,o=typeof o===a?o.apply(t):o),s+=f(o)+'"></input>\n',u={hash:{},inverse:l.noop,fn:l.program(3,p,i),data:i},(o=n.templateData)?o=o.call(t,u):(o=t.templateData,o=typeof o===a?o.apply(t):o),n.templateData||(o=c.call(t,o,u));if(o||o===0)s+=o;return s+='\n<div class="gbst-clear"></div>\n</div>\n',s}),this.HandlebarsTemplates["checkbox-input/templates/checkbox-input-templates"]}.call(this),function(e){Handlebars.registerHelper("I18n",function(e,t){var n=t;t&&t.hash&&(n=t.hash);var r="";return I18n?e!=null?r=I18n.t(e,n):r="Invalid 'str' value":r=e,r}),Handlebars.registerHelper("I18n-$",function(t,n){var r=n;n&&n.hash&&(r=n.hash);if(r.html){var i=I18n.t("number.currency.format.htmlFormat");e.extend(r,{format:i})}var s="";return I18n?t!=null?s=I18n.toCurrency(t,r):s="Invalid 'str' value":s=t,new Handlebars.SafeString(s)})}(jQuery),function(e){var t=gbst.module("gbst.loan.app.loancomparisoncalculator.config.chart");t.getChartConfig=function(t,n){var r={color:I18n.t("colors.textColor"),fontWeight:"bold",fontSize:"11px",fontFamily:"Arial, Verdana"},i={color:I18n.t("colors.textColor"),fontWeight:"bold",fontSize:"13px",fontFamily:"Arial, Verdana"},s={parentId:"loan-chart",chart:{backgroundColor:"rgba(255,255,255,0.5)",defaultSeriesType:"area",plotShadow:!1,reflow:!1,marginTop:40,spacingTop:0,spacingBottom:0,spacingRight:20,spacingLeft:10,borderRadius:0,renderTo:t,events:{load:n}},colors:["#0782be","#005c88"],credits:{enabled:!1},legend:{layout:"horizontal",backgroundColor:"rgba(255,255,255,0.33)",align:"right",verticalAlign:"top",x:0,y:5,floating:!0,borderRadius:5,borderWidth:0,itemStyle:{color:I18n.t("colors.textColor"),cursor:"default",fontWeight:"normal",fontSize:"12px",fontFamily:"Arial, Verdana"},itemHoverStyle:{color:I18n.t("colors.textColor")}},xAxis:{endOnTick:!0,labels:{style:r,y:20},lineColor:"#e1e1e1",lineWidth:1,maxPadding:0,min:0,title:{align:"middle",style:i,margin:20},tickColor:"#666666",tickPlacement:"on",tickPosition:"outside",tickWidth:2,tickLength:3},yAxis:{gridLineColor:"#e1e1e1",gridLineWidth:1,allowDecimals:!1,labels:{style:r},lineColor:"#e1e1e1",lineWidth:1,title:{style:i},tickColor:"#666666",tickPlacement:"on",tickPosition:"outside",tickWidth:2,tickLength:3},plotOptions:{series:{animation:!0,enableMouseTracking:!1,pointPadding:0,groupPadding:0,events:{legendItemClick:function(){return!1}}},area:{lineWidth:0,fillOpacity:1,connectNulls:!0,marker:{radius:0,lineWidth:0}}},title:{text:null}},o={title:{},xAxis:{title:{text:I18n.t("labels.chartView.xAxisTitle")}},yAxis:{title:{text:I18n.t("labels.chartView.yAxisTitle",{unit:I18n.t("number.currency.format.unit")})}},series:this.getChartSeries(),tooltip:{enabled:!1}};return e.extend(!0,s,o),s},t.getChartSeries=function(){return[{id:"totalAccumulated",name:I18n.t("labels.chartView.totalAccumulatedTitle"),borderWidth:0,color:{linearGradient:[0,0,200,0],stops:[[0,hexToRGBA(lighterColor(I18n.t("colors.primaryColor"),.1),"1")],[1,hexToRGBA(darkerColor(I18n.t("colors.primaryColor"),.1),"1")]]},shadow:!1}]},t.tooltip={indicatorColor:"rgba(204, 204, 204, 0.3)",mouseOffsetX:5,mouseOffsetY:-30,touchOffsetX:0,touchOffsetY:-170}}(jQuery),function(e){var t=gbst.namespace("gbst.loan.app.loancomparisoncalculator.translations");I18n.translations=I18n.translations||{},I18n.translations.en=t.en}(jQuery),function(e){var t=gbst.module("gbst.loan.app.loancomparisoncalculator"),n=gbst.module("gbst.loan.app.loancomparisoncalculator.control");n.TermController=function(e,n){this.dispatcher=e,this.controlsModel=n,this.controlsModel.on("change:term",function(n){console.log("Control_Change event fired!",n);var r=this.get("term"),i=this.get("extraContributionStartYear");i>=r&&(i=r-1,this.set({extraContributionStartYear:i},{silent:!0}),e.trigger(t.Events.UPDATE_VIEW+":extraContributionStartYear"))})}}(jQuery),function(e){var t=gbst.module("gbst.loan.app.loancomparisoncalculator.config"),n=gbst.module("gbst.loan.app.loancomparisoncalculator.model");n.CommonControlValues=Backbone.Model.extend({localStorage:null,defaults:I18n.t("defaults.commonDefaults"),initialize:function(){window.localStorage&&(this.localStorage=new Store("gbst.loan.app.loanComparisonCalculator"))},parse:function(t){return e.isArray(t)&&t.length>0&&(t=_.first(t)),t}})}(jQuery),function(e){var t=gbst.module("gbst.loan.app.loancomparisoncalculator.config"),n=gbst.module("gbst.loan.app.loancomparisoncalculator.model"),r=gbst.module("gbst.loan.app.loancomparisoncalculator.view"),i=gbst.module("gbst.loan.shared.view");n.ControlsDeclaration={getCommonLoanDeclaration:function(){return{id:"common-loan-details",templateId:"loan-comparison-calculator/templates/common-loan-details",controls:[{name:"loanAmount",view:i.StandardInputView,templateId:"standard-input/templates/standard-input-templates",templateData:{title:"labels.loanCommonDetailsView.LoanAmountLabel",controlId:gbst.util.getNewId()},controlData:{inputData:I18n.t("defaults.controls.loanAmount")},formatter:t.convertFn.moneyConverter_back,parser:t.convertFn.numberConverter},{name:"loanTerm",view:i.SliderView,templateId:"slider-input/templates/slider-input-templates",templateData:{title:"labels.loanCommonDetailsView.termLabel",controlId:gbst
.util.getNewId()},controlData:{sliderData:I18n.t("defaults.controls.loanTerm")},formatter:function(e){var t=I18n.t("labels.loanCommonDetailsView.termFormat",{count:e});return t},parser:t.convertFn.numberConverter}]}},getLoanControlsDeclaration:function(){return{id:"loan-details-panel",templateId:"loan-comparison-calculator/templates/loan-details-panel",tabValue:0,controls:[{name:"upfrontFees",view:i.StandardInputView,templateId:"standard-input/templates/standard-input-templates",templateData:{title:"labels.loan1.upfrontFeesLabel",controlId:gbst.util.getNewId()},controlData:{inputData:I18n.t("defaults.controls.upfrontFees")},formatter:t.convertFn.moneyConverter_back,parser:t.convertFn.numberConverter},{name:"ongoingFees",view:i.StandardInputView,templateId:"standard-input/templates/standard-input-templates",templateData:{title:"labels.loan1.ongoingFeesLabel",controlId:gbst.util.getNewId(),labelClass:"",controlClass:""},controlData:{inputData:I18n.t("defaults.controls.ongoingFees")},formatter:t.convertFn.moneyConverter_back,parser:t.convertFn.numberConverter},{name:"ongoingFeesFrequency",view:i.SelectmenuView,templateId:"selectmenu/templates/selectmenu-templates",templateData:{title:"labels.loan1.ongoingFeesFrequencyLabel",controlId:gbst.util.getNewId()},controlData:{listData:I18n.t("defaults.controls.frequency")}},{name:"ongoingRate",view:i.SliderView,templateId:"slider-input/templates/slider-input-templates",templateData:{title:"labels.loan1.ongoingRateLabel",controlId:gbst.util.getNewId(),labelClass:"",controlClass:""},controlData:{sliderData:I18n.t("defaults.controls.ongoingRate")},formatter:t.convertFn.interestConverter_back,parser:t.convertFn.interestConverter},{name:"introductoryRateCheckBox",view:i.CheckBoxInputView,templateId:"checkbox-input/templates/checkbox-input-templates",templateData:{title:"labels.loan1.introductoryRateCheckBoxLabel",controlId:gbst.util.getNewId()}},{name:"introductoryRateCheckBox",elementSelector:".introductoryPanel",view:r.IntroductoryPanelView,controls:[{name:"introductoryRate",view:i.SliderView,templateId:"slider-input/templates/slider-input-templates",templateData:{title:"labels.loan1.introductoryRateLabel",controlId:gbst.util.getNewId(),labelClass:"",controlClass:""},controlData:{sliderData:I18n.t("defaults.controls.introductoryRate")},formatter:t.convertFn.interestConverter_back,parser:t.convertFn.interestConverter},{name:"introductoryTerm",view:i.SliderView,templateId:"slider-input/templates/slider-input-templates",templateData:{title:"labels.loan1.introductoryTermLabel",controlId:gbst.util.getNewId(),labelClass:"",controlClass:""},controlData:{sliderData:I18n.t("defaults.controls.introductoryTerm")},formatter:function(e){var t=I18n.t("labels.loan1.introductoryTermFormat",{count:e});return t},parser:t.convertFn.numberConverter}]}]}}}}(jQuery),function(e){var t=gbst.module("gbst.loan.app.loancomparisoncalculator.config"),n=gbst.module("gbst.loan.app.loancomparisoncalculator.model");n.LoanComparisonValues=Backbone.Model.extend({localStorage:null,defaults:{commonControlValues:null,loanControlsCollection:null},initialize:function(e){window.localStorage&&(this.localStorage=new Store("gbst.loan.app.loanComparisonCalculator"))},parse:function(t){return e.isArray(t)&&t.length>0&&(t=_.first(t)),t}})}(jQuery),function(e){var t=gbst.module("gbst.loan.app.loancomparisoncalculator.config"),n=gbst.module("gbst.loan.app.loancomparisoncalculator.model");n.LoanControlValues=Backbone.Model.extend({localStorage:null,defaults:{},initialize:function(){window.localStorage&&(this.localStorage=new Store("gbst.loan.app.loanComparisonCalculator"))},parse:function(t){return e.isArray(t)&&t.length>0&&(t=_.first(t)),t},getFrequency:function(){var e=this.get("ongoingFeesFrequency"),n=t.periods[e];if(!n)throw new Error("Missing frequency value for frequency type: '"+e+"'");return n},getOngoingFeeFrequency:function(e){return this.getFrequency()/e}})}(jQuery),function(e){var t=gbst.module("gbst.loan.app.loancomparisoncalculator.config"),n=gbst.module("gbst.loan.app.loancomparisoncalculator.model");n.LoanControlsCollection=Backbone.Collection.extend({localStorage:null,model:n.LoanControlValues,initialize:function(e){window.localStorage&&(this.localStorage=new Store("gbst.loan.app.loanComparisonCalculator"))},parse:function(t){return e.isArray(t)&&t.length>0&&(t=_.first(t)),t}})}(jQuery),function(e){var t=gbst.module("gbst.loan.app.loancomparisoncalculator.model");t.LoanSummaryResult=function(){this.totalPaidBack=0,this.introPmt=0,this.ongoingPmt=0,this.chartSummary=new t.ChartSummaryModel},t.ChartSummaryModel=function(){this.totalAccumulated=[],this.tooltipData=[]}}(jQuery),function(e){var t=gbst.module("gbst.loan.app.loancomparisoncalculator.model");t.ResultsModel=Backbone.Model.extend({defaults:{chartSummary:null,resultsLoan1:null,resultsLoan2:null,loanSavings:-1,loanSavingsLabel:""}})}(jQuery);var pad=function(e,t){var n="0";e+="";while(e.length<t)e=n+e;return e},changeColor=function(e,t,n){e=e.replace(/^\s*|\s*$/,""),e=e.replace(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i,"#$1$1$2$2$3$3");var r=Math.round(t*256)*(n?-1:1),i=e.match(new RegExp("^rgba?\\(\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])\\s*,\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])\\s*,\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])(?:\\s*,\\s*(0|1|0?\\.\\d+))?\\s*\\)$","i")),s=!i||i[4]==null?null:i[4],o=i?[i[1],i[2],i[3]]:e.replace(/^#?([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])/i,function(){return parseInt(arguments[1],16)+","+parseInt(arguments[2],16)+","+parseInt(arguments[3],16)}).split(/,/),u;return i?"rgb"+(s!==null?"a":"")+"("+Math[n?"max":"min"](parseInt(o[0],10)+r,n?0:255)+", "+Math[n?"max":"min"](parseInt(o[1],10)+r,n?0:255)+", "+Math[n?"max":"min"](parseInt(o[2],10)+r,n?0:255)+(s!==null?", "+s:"")+")":["#",pad(Math[n?"max":"min"](parseInt(o[0],10)+r,n?0:255).toString(16),2),pad(Math[n?"max":"min"](parseInt(o[1],10)+r,n?0:255).toString(16),2),pad(Math[n?"max":"min"](parseInt(o[2],10)+r,n?0:255).toString(16),2)].join("")},lighterColor=function(e,t){return changeColor(e,t,!1)},darkerColor=function(e,t){return changeColor(e,t,!0)},hexToR=function(e){return parseInt(cutHex(e).substring(0,2),16)},hexToG=function(e){return parseInt(cutHex(e).substring(2,4),16)},hexToB=function(e){return parseInt(cutHex(e).substring(4,6),16)},cutHex=function(e){return e.charAt(0)=="#"?e.substring(1,7):e},hexToRGBA=function(e,t){return"rgba("+hexToR(e)+", "+hexToG(e)+", "+hexToB(e)+", "+t+")"};(function(e){var t=gbst.module("gbst.loan.app.loancomparisoncalculator");t.DataLoader=function(){this.load=function(t){var n=e.ajax({type:"GET",url:t,cache:!1,dataType:"html",context:this}),r=n.promise();return r}}})(jQuery),function(e){var t=gbst.module("gbst.loan.app.loancomparisoncalculator.util"),n=gbst.module("gbst.loan.app.loancomparisoncalculator.model");t.LoanRepaymentUtil=function(){var e=gbst.module("gbst.loan.app.loancomparisoncalculator.config"),t="loanRepaymentResults";this.mapControlsToVO=function(t){var n=t.get("commonControlValues").get("loanAmount"),r=t.get("commonControlValues").get("loanTerm"),i=t.get("loanControlsCollection"),s=i.length,o=null,u=[],a=null;for(var f=0;f<s;f++){o=i.at(f);var l=o.getOngoingFeeFrequency(e.periods.month);a={pv:n,term:r,interestRate:o.get("ongoingRate"),ongoingFees:o.get("ongoingFees"),ongoingFeesFrequency:o.getFrequency(),upfrontFees:o.get("upfrontFees"),introductoryRate:o.get("introductoryRate"),introductoryTerm:o.get("introductoryTerm"),hasIntroductoryRate:o.get("introductoryRateCheckBox"),ongoingFrequency:l},u.push(a)}return u},this.getLoan=function(r){var i=gbst.calculator(r).loan();r.hasIntroductoryRate&&i.chain(!0).interestRate({interestRate:r.introductoryRate,startTerm:0,endPeriod:r.introductoryTerm,active:r.hasIntroductoryRate}).calculateRepayment({period:r.introductoryTerm,update:!0}),r.ongoingFees&&i.ongoingFee({ongoingFee:r.ongoingFees*r.ongoingFrequency}),r.upfrontFees&&i.startupFee({startupFee:r.upfrontFees}),i.calculateRepayment().chain(!1);var s=e.periods.month;return i.aggregate({reset:function(){i.context.loanSummaryResult=new n.LoanSummaryResult}}).aggregate({finaliseResults:function(e,t,n){var s=n.getStorage("calculateRepayment"),o=n.getStorage("ongoingFee"),u=i.context.loanSummaryResult,a=0;o.feeList&&(a=o.feeList[0].fee),r.hasIntroductoryRate?(u.introPmt=s.pmtList[0].pmt+a,u.ongoingPmt=s.pmtList[1].pmt+a):(u.introPmt=a,u.ongoingPmt=s.pmtList[0].pmt+a)}}).aggregate({updateResults:function(e,t,n){if(e%s!=0)return;var r=i.context.loanSummaryResult,o=r.chartSummary,u=e/s,a=0,f=0;t.outValues.totals.startupFee&&(a=t.outValues.totals.startupFee),t.outValues.totals.ongoingFee&&(f=t.outValues.totals.ongoingFee);var l=a+f+t.outValues.totals.pmt;o.totalAccumulated.push({period:e,x:u,y:l}),o.tooltipData.push({year:u,totalAccumulated:l})},finaliseResults:function(e,n,r){var s=i.context.loanSummaryResult,o=0,u=0,a=0,f=0;n.outValues.totals.startupFee&&(o=n.outValues.totals.startupFee),n.outValues.totals.ongoingFee&&(u=n.outValues.totals.ongoingFee,a=n.inValues.ongoingFees,r.summaryList[1].inValues.introductoryTerm>0&&(f=r.summaryList[1].inValues.pmt)),s.totalPaidBack=n.outValues.totals.pmt+o+u;var l=r.getStorage(t);l.result=s,s=null,i.context.loanSummaryResult=null}}),i},this.calculate=function(e,n){var r=e.calculateLoan(),i=n.calculateLoan(),s=r.getStorage(t),o=i.getStorage(t),u=s.result,a=o.result;s.result=null,delete s.result,o.result=null,delete o.result;var f=Math.abs(u.totalPaidBack-a.totalPaidBack),l=0,c="";u.totalPaidBack>a.totalPaidBack?(l=2,c=I18n.t("labels.loan2.title")):(l=1,c=I18n.t("labels.loan1.title"));var h=I18n.t("labels.resultsView.loanSavingsLabel",{loanMessage:c}),p=[],d=[],v=u.chartSummary.totalAccumulated,m=a.chartSummary.totalAccumulated,g=v.length,y=0;for(var b=0;b<g;b++){var w=v[b],E=m[b];y=0,l==1?y=E.y-w.y:y=w.y-E.y;var S={period:w.period,x:b,y:y},x={year:b,totalAccumulated:y,loanNumber:l};p.push(S),d.push(x)}var T={totalAccumulated:p,tooltipData:d},N={resultsLoan1:u,resultsLoan2:a,loanSavings:Math.abs(f),loanSavingsLabel:h,chartSummary:T};return N}}}(jQuery),function(e){var t=gbst.module("gbst.common.util"),n=480,r=300;t.ResponsiveUtil={appElement:null,dispatcher:null,fixedWidth:-1,previousWidth:-1,Events:{RESIZE:"responsiveUtil.Resize"},device_size:[{style:"default_layout",range:{min:980,max:Number.POSITIVE_INFINITY}},{style:"portrait_tablets_layout",range:{min:768,max:979}},{style:"phones_to_tablets_layout",range:{min:481,max:767}},{style:"phones_layout",range:{min:0,max:n}}],init:function(t,r,i){this.appElement=t,this.dispatcher=r,this.fixedWidth=i,this.appElement.css("max-width",i),this.fixedWidth<=n&&this.appElement.addClass("phones_layout"),e(window).resize(_.debounce(e.proxy(this.setLayout,this),20)),this.setLayout()},getStyle:function(e){var t=_.find(this.device_size,function(t,n){return t.range.min<=e&&e<=t.range.max});return t.style},setLayout:function(){var e=this.appElement,t=e.parent().width();if(t<=r&&this.previousWidth<=r&&this.previousWidth>0)return;if(t==this.previousWidth)return;this.previousWidth=t;var n=this.getStyle(t);e.removeClass(function(e,t){return(t.match(/\w+_layout/g)||[]).join(" ")}).addClass(n),t<this.fixedWidth&&e.addClass("responsive_layout"),this.dispatcher.trigger(this.Events.RESIZE)}}}(jQuery),function(e){var t=gbst.module("gbst.loan.app.loancomparisoncalculator.util.stylechange");t.applyStyleChanges=function(){var t=this.prepareContext(),n="loan-comparison-calculator/templates/style",r=HandlebarsTemplates[n](t);e("head").append(r)},t.prepareContext=function(){var e=I18n.t("colors");e.startColor=lighterColor(e.primaryColor,.03),e.hoverColor=e.endColor=darkerColor(e.primaryColor,.1),e.secondaryStartColor=lighterColor(e.secondaryColor,.03),e.secondaryEndColor=darkerColor(e.secondaryColor,.1),e.defaultColor=I18n.t("labels.resultsView.displayType.borderColor"),e.transparentColor="transparent";var t={colors:e};return t},t.changeSelectmenuColor=function(t){var n=I18n.t("colors.textColor"),r=t.find("select").each(function(){e(this).data("selectmenu").list.css("color",n)})}}(jQuery),function(e){var t=gbst.module("gbst.loan.app.loancomparisoncalculator"),n=gbst.module("gbst.loan.app.loancomparisoncalculator.view");n.ChartTooltipView=Backbone.View.extend({templateId:"loan-comparison-calculator/templates/chart-tooltip",wrapperClass:"chart-tooltip-wrapper",dispatcher:null,viewInitialised:!1,initialize:function(n){this.dispatcher=n.dispatcher,this.hide(),this.dispatcher.bind(t.Events.SHOW_CHART_TOOLTIP,e.proxy(this.showTooltip_handler,this)),this.dispatcher.bind(t.Events.HIDE_CHART_TOOLTIP,e.proxy(this.hideTooltip_handler,this))},render:function(){return this.$el.addClass(this.wrapperClass),this},show:function(){this.$el.show()},hide:function(){this.$el.hide()},showTooltip_handler:function(){},hideTooltip_handler:function(){},showData:function(e,t){var n=t[e],r=this.getTemplate(n);this.$el.empty().append(r)},getTemplate:function(e){var t=HandlebarsTemplates[this.templateId](e);return t}})}(jQuery),function(e){var t=gbst.module("gbst.loan.app.loancomparisoncalculator.config"),n=gbst.module("gbst.loan.app.loancomparisoncalculator"),r=gbst.module("gbst.loan.app.loancomparisoncalculator.config.chart"),i=gbst.module("gbst.loan.app.loancomparisoncalculator.view"),s=gbst.module("gbst.common.util");i.ChartView=Backbone.View.extend({resultsModel:null,dispatcher:null,templateId:"loan-comparison-calculator/templates/loan-chart",chartClass:"loan-chart",chartInstance:null,chartElement:null,tooltipView:null,hasPlotLine:!1,oldMouseOverIndex:null,tooltipData:null,initialize:function(t){this.results=t.results;var n=this.dispatcher=e(t.dispatcher);this.createChartElements(this.$el),this.hideTooltip_proxy=e.proxy(this.hideTooltip,this),this.resultsModel=t.resultsModel,this.resultsModel.on("change",e.proxy(this.renderResults,this)),this.dispatcher.bind(s.ResponsiveUtil.Events.RESIZE,e.proxy(this.resizeGraph,this))},renderResults:function(){var e=this.resultsModel.get("chartSummary"),t=0,n=this.chartInstance,i=r.getChartSeries(),s=i.length,o=null,u=null,a=null;for(t=0;t<s;t++){u=i[t],o=n.get(u.id),a=e[u.id];if(!o)throw new Error("Could not find chart series ID='"+u.id+"'");o.setData(a,!1)}this.tooltipData=e.tooltipData,n.redraw(),this.resizeGraph()},render:function(){if(!this.viewInitialised){var e=this,t=function(){e.dispatcher.trigger(n.Events.CHART_LOADED)},i=r.getChartConfig(this.chartElement[0],t);this.chartInstance=new Highcharts.Chart(i),this.initChartEvents(this.$el),this.viewInitialised=!0}return this.tooltipView.render(),this},createChartElements:function(t){var n=gbst.util.getNewId(),r=HandlebarsTemplates[this.templateId]();r=e(r),r.attr("id",n),this.chartElement=r;var s=new i.ChartTooltipView({dispatcher:this.dispatcher});this.tooltipView=s,t.append(r,s.$el)},initChartEvents:function(n){var r=e.proxy(this.startTooltipTimer,this),i=e.proxy(this.chartTouchMouseMoveHandler,this);t.isTouchEnabled?(n.bind("touchstart touchmove",i),e(document).bind("touchstart",function(){r()})):(n.bind("mousemove",i),n.bind("mouseout",r))},chartTouchMouseMoveHandler:function(n){var r=this.chartInstance.series[0],i=r.xAxis,s=r.data,o=0,u=0,a=e(this.chartInstance.container).offset();if(!a)return;var f=n.originalEvent?n.originalEvent:{pageX:0,pageY:0};t.isTouchEnabled?(o=n.originalEvent.touches[0].pageX,u=n.originalEvent.touches[0].pageY):(o=n.pageX?n.pageX:f.pageX,u=n.pageY?n.pageY:f.pageY);var l=o-this.chartInstance.plotLeft-a.left,c=u-this.chartInstance.plotTop-a.top,h=Math.round(i.translate(l,!0));if(h>=0&&h<s.length){this.tooltipView.show(),this.oldMouseOverIndex!=h&&(this.oldMouseOverIndex=h,this.tooltipView.showData(h,this.tooltipData),this.tooltipShown=!0,this.showPlotLine(i,h));var p=o-a.left,d=u-a.top;this.positionTooltip(n,this.tooltipView,p,d),this.clearTooltipTimer()}else this.startTooltipTimer()},showPlotLine:function(e,t){this.hidePlotLine(e),e.addPlotLine({id:"mousePos",color:r.tooltip.indicatorColor,value:t,width:2,zIndex:15}),this.hasPlotLine=!0},hidePlotLine:function(e){if(!e){var t=this.chartInstance.series[0];e=t.xAxis}this.hasPlotLine&&(e.removePlotLine("mousePos"),this.hasPlotLine=!1)},positionTooltip:function(e,t,n,i){var s=t.$el,o=r.tooltip,u=e.type.indexOf("touch")>=0;u&&e.stopPropagation();var a=u?o.touchOffsetX:o.mouseOffsetX,f=u?o.touchOffsetY:o.mouseOffsetY,l=n+a,c=i+f,h=s.parent(),p=h.width(),d=h.height(),v=s.width(),m=s.height();v+l>p?(l=n-v-a,this.tooltipStyle==null&&(s.addClass("right"),this.tooltipStyle="right")):this.tooltipStyle!=null&&(s.removeClass("right"),this.tooltipStyle=null),l=Math.min(Math.max(-v,l),p-v),c=Math.min(Math.max(0,c),d-m),s.css({left:l,top:c})},startTooltipTimer:function(){this.clearTooltipTimer(),this.seriesMouseOutTimeoutId=setTimeout(this.hideTooltip_proxy,250)},clearTooltipTimer:function(){this.seriesMouseOutTimeoutId!=null&&(clearTimeout(this.seriesMouseOutTimeoutId),this.seriesMouseOutTimeoutId=null)},hideTooltip:function(){this.clearTooltipTimer(),this.tooltipView.hide(),this.hidePlotLine()},hideTooltip_proxy:null,resizeGraph:function(){var e=this.chartInstance,t=this.chartElement.width(),n=this.chartElement.height();e.setSize(t,n,!1)}})}(jQuery),function(e){var t=gbst.module("gbst.loan.app.loancomparisoncalculator.view");t.IntroductoryPanelView=Backbone.View.extend({templateId:null,model:null,dispatcher:null,controlConfig:null,controlsInitialised:!1,controlsList:null,isVisible:!0,DEFAULT_MAX_INTRODUCTORY_TERM:0,introductoryTermControl:null,initialize:function(t){this.dispatcher=e(t.dispatcher),this.model=t.model,this.commonControlsModel=t.commonControlsModel.get("commonControlValues"),this.controlConfig=t.controlConfig,this.controlsList=[];var n=this.controlConfig.name;this.model.on("change:"+n,e.proxy(this.visibilityChange_handler,this)),this.commonControlsModel.on("change:loanTerm",this.updateTerm_handler,this)},render:function(){var e=0,t=0,n=this.controlsList;if(!this.controlsCreated){var r=this.controlConfig.name;this.isVisible=this.model.get(r),this.createControls(this.$el,this.controlConfig.controls,this.model),this.controlsCreated=!0}t=n.length;for(e=0;e<t;e++)n[e].render();this.setDefaultValues(n);var i=this.commonControlsModel.get("loanTerm");this.updateTerm_handler(this.commonControlsModel,i),this.updateVisibility()},updateTerm_handler:function(e,t){t=t*12-1;var n=this.DEFAULT_MAX_INTRODUCTORY_TERM;this.updateControl(this.introductoryTermControl,t,n)},setDefaultValues:function(e){var t=this.introductoryTermControl=this.getViewByModelId("introductoryTerm",e);t&&(this.DEFAULT_MAX_INTRODUCTORY_TERM=t.getMaxValue())},getViewByModelId:function(e,t){var n=_.find(t,function(t,n){return t.controlConfig.name==e});return n},updateControl:function(e,t,n){t>n&&(t=n);if(t==e.getMaxValue())return;e.resetMaxValue(t),e.invalidateView(),e.render()},createControls:function(e,t,n){var r=0,i=null,s=t.length,o=null,u=null;for(r=0;r<s;r++)o=t[r],i=o.elementSelector||"."+o.name,u=new o.view({el:e.find(i),dispatcher:this.dispatcher,controlConfig:o,model:n}),this.controlsList.push(u)},visibilityChange_handler:function(e,t){this.isVisible=t,this.updateVisibility(t)},updateVisibility:function(){this.isVisible?this.$el.slideDown():this.$el.slideUp()}})}(jQuery),function(e){var t=gbst.module("gbst.loan.app.loancomparisoncalculator"),n=gbst.module("gbst.loan.app.loancomparisoncalculator.config"),r=gbst.module("gbst.loan.app.loancomparisoncalculator.view"),i=gbst.module("gbst.loan.app.loancomparisoncalculator.util.stylechange"),s=gbst.module("gbst.common.util");t.LoanCalculatorView=Backbone.View.extend({appTemplateId:"loan-comparison-calculator/templates/app-template",infoOverlayId:"loan-comparison-calculator/templates/information-overlay-tmpl",infoOverlayElement:null,dispatcher:null,viewInitialised:!1,controlsView:null,resultsView:null,chartView:null,controlsModels:null,resultsModel:null,events:{"click .print-icon":"print","click .info-icon":"infoClickHandler"},initialize:function(n){this.dispatcher=n.dispatcher,this.controlsModels=n.controlsModels,this.resultsModel=n.resultsModel,this.dispatcher.bind(t.Events.CHART_LOADED,e.proxy(this.registerCalculation,this)),this.dispatcher.bind(s.ResponsiveUtil.Events.RESIZE,e.proxy(this.resizeOverlay,this))},registerCalculation:function(){var e=this;_.defer(function(){e.dispatcher.trigger(t.Events.CALCULATE,[e.controlsModels,e.resultsModel])})},render:function(){var e=this.$el;i.applyStyleChanges();if(!this.viewInitialised){this.viewInitialised=!0;var t=this.prepareContext(),n=HandlebarsTemplates[this.appTemplateId](t);e.empty().append(n),this.controlsView=new r.LoanControlsView({controlsModels:this.controlsModels,dispatcher:this.dispatcher,el:e.find(".inputs-wrapper")}),this.resultsView=new r.ResultsView({dispatcher:this.dispatcher,resultsModel:this.resultsModel,el:e.find(".outputs-wrapper")}),this.chartView=new r.ChartView({dispatcher:this.dispatcher,resultsModel:this.resultsModel,el:e.find(".chart-wrapper")})}return this.controlsView.render(),this.resultsView.render(),this.chartView.render(),i.changeSelectmenuColor(e),this},prepareContext:function(){var e={};return e.disclaimer=I18n.t("labels.loanCalculator.disclaimer"),e},infoClickHandler:function(t){var r=this.infoOverlayElement;if(r==null){var i=HandlebarsTemplates[this.infoOverlayId]();i=e(i),this.$el.append(i),r=this.infoOverlayElement=i.overlay(n.infoOverlayConfig)}return r.overlay().load(),this.resizeOverlay(),r.css({top:0,left:0}),!1},resizeOverlay:function(){if(!this.infoOverlayElement)return;if(this.infoOverlayElement.is(":hidden"))return;var e=parseInt(this.$el.css("height"),10)-14;this.infoOverlayElement.css("height",e);var t=parseInt(this.$el.css("width"),10)-14;this.infoOverlayElement.css("width",t);var n=this.infoOverlayElement.find(".content");n.css("height",e-120)},print:function(){window.print()}})}(jQuery),function(e){var t=gbst.module("gbst.loan.app.loancomparisoncalculator"),n=gbst.module("gbst.loan.app.loancomparisoncalculator.model"),r=gbst.module("gbst.loan.app.loancomparisoncalculator.view");r.LoanControlsView=Backbone.View.extend({dispatcher:null,templateId:"loan-comparison-calculator/templates/common-loan-details",controlsModel:null,controlsList:null,commonControlsView:null,tabPanels:[],tabIndex:0,events:{},initialize:function(t){this.dispatcher=e(t.dispatcher),this.controlsModel=t.controlsModels,this.controlsList=[],this.tabPanels=[]},render:function(){var i=0,s=0,o=this.controlsList;if(!this.controlsCreated){var u=n.ControlsDeclaration.getCommonLoanDeclaration(),a=this.$el.find("."+u.id);this.commonControlsView=this.createPanel(a,u,this.controlsModel.get("commonControlValues"));var f=this.controlsModel.get("loanControlsCollection"),l=f.length,c=null;for(i=0;i<l;i++){c=f.at(i),u=n.ControlsDeclaration.getLoanControlsDeclaration(),a=this.$el.find("."+u.id).eq(i);var h=this.createPanel(a,u,c,this.controlsModel);this.tabPanels.push(h)}this.tabsView=new r.TabsView({models:this.controlsModel,dispatcher:this.dispatcher,el:this.$el.find(".tabs")}),this.dispatcher.bind(t.Events.TAB_CHANGE,e.proxy(this.tabChange_handler,this)),this.controlsCreated=!0}s=o.length;for(i=0;i<s;i++)o[i].render();return this.tabsView.render(),this.showPanel(this.tabIndex),this},tabChange_handler:function(e,t){this.tabIndex=t.value,this.showPanel(this.tabIndex)},hideAllPanels:function(){var e=this.tabPanels,t=e.length;for(var n=0;n<t;n++){var r=e[n];r.hide()}},showPanel:function(e){this.hideAllPanels();var t=this.tabPanels[e];t.show()},createPanel:function(e,t,n,r){var i=HandlebarsTemplates[t.templateId]();return e.append(i),this.createControls(e,t.controls,n,r),e},createControls:function(e,t,n,r){var i=0,s=null,o=t.length,u=null,a=null;for(i=0;i<o;i++)u=t[i],s=u.elementSelector||"."+u.name,a=new u.view({el:e.find(s),dispatcher:this.dispatcher,controlConfig:u,model:n,commonControlsModel:r}),this.controlsList.push(a)}})}(jQuery),function(e){var t=gbst.module("gbst.loan.app.loancomparisoncalculator"),n=gbst.module("gbst.loan.app.loancomparisoncalculator.view");n.ResultsView=Backbone.View.extend({templateId:"loan-comparison-calculator/templates/outputs-wrapper",resultsModel:null,dispatcher:null,initialize:function(t){this.resultsModel=t.resultsModel,this.resultsModel.on("change",e.proxy(this.renderResults,this))},renderResults:function(){var e=this.resultsModel.toJSON(),t=HandlebarsTemplates[this.templateId](e);this.$el.empty().append(t)}})}(jQuery),function(e){var t=gbst.module("gbst.loan.app.loancomparisoncalculator"),n=gbst.module("gbst.loan.app.loancomparisoncalculator.view");n.TabsView=Backbone.View.extend({templateId:"loan-comparison-calculator/templates/tabs",model:null,dispatcher:null,controlConfig:null,controlsInitialised:!1,tabs:[],events:{"click .tab":"tabClick_handler","keydown .tab":"tabClick_handler"},initialize:function(t){this.results=t.results,this.dispatcher=e(t.dispatcher),this.tabs=[]},render:function(){return this.renderTabs(this.results),this},renderTabs:function(n){var r=HandlebarsTemplates[this.templateId](n);r=e(r);var i=this.tabsElements=r.find("a"),s=i.length;for(var o=0;o<s;o++){var u=i.eq(o);this.tabs.push(u)}this.$el.empty().append(r),this.dispatcher.bind(t.Events.TAB_CHANGE,e.proxy(this.tabUpdate,this))},tabUpdate:function(e,t){var n=t.value,r=this.tabs[n];this.removeCurrentStatus(),this.addCurrentStatus(r)},removeCurrentStatus:function(){this.tabsElements.removeClass("current")},addCurrentStatus:function(e){e.addClass("current")},tabClick_handler:function(n){if(n.type=="keydown"&&n.keyCode!=13)return;var r=e(n.target).attr("value");this.dispatcher.trigger(t.Events.TAB_CHANGE,{value:r})}})}(jQuery),function(e){var t=gbst.module("gbst.loan.app.loancomparisoncalculator"),n=gbst.module("gbst.loan.app.loancomparisoncalculator.control"),r=gbst.module("gbst.loan.app.loancomparisoncalculator.model");n.APIController=function(){this.inputs=null,this.results=null,this.init=function(e,t,n){this.inputs=e,this.results=t,n&&this.restoreCalc(n)},this.getValues=function(){var e={inputs:this.inputs.toJSON(),results:this.results.toJSON()};return e},this.restoreCalc=function(e){this.inputs.get("commonControlValues").set(e.commonControlValues),this.inputs.get("loanControlsCollection").reset([e.loanControlsCollection[0],e.loanControlsCollection[1]])}}}($),function(e){var t=gbst.module("gbst.loan.app.loancomparisoncalculator.config");I18n.defaultLocale="en",I18n.fallbacks=!0,t.style={styleSelectMenu:!0},t.infoOverlayConfig={fixed:!1,top:0,left:0},t.periods={annual:1,month:12,fortnight:26,week:52},t.convertFn={numberConverter:function(e){var t=I18n.t("number.format.separator"),n=gbst.util.NumberUtil.parseNumber(e,t);return n},moneyConverter_back:function(e,t,n){var r=I18n.toCurrency(e,{precision:0});return r},listConverter:function(e){return e},listConverter_back:function(e){return[e]},interestConverter:function(e){var t=I18n.t("number.format.separator"),n=gbst.util.NumberUtil.parseNumber(e,t);return n},interestConverter_back:function(e){var t=I18n.toPercentage(e,{precision:2});return t}},t.isTouchEnabled=Modernizr.touch}(jQuery),function(e){var t=gbst.module("gbst.loan.app.loancomparisoncalculator"),n=gbst.module("gbst.loan.app.loancomparisoncalculator.model"),r=gbst.module("gbst.loan.app.loancomparisoncalculator.util"),i=gbst.module("gbst.loan.app.loancomparisoncalculator.control"),s=gbst.module("gbst.common.util");t.Events={CALCULATE:"loancalculator.calculate",UPDATE_RESULTS:"loancalculator.updateResults",SHOW_CHART_TOOLTIP:"loancalculator.showChartTooltip",HIDE_CHART_TOOLTIP:"loancalculator.hideChartTooltip",CONTROL_CHANGE:"loancalculator.control.change",TAB_CHANGE:"loancalculator.tab.change",CHART_LOADED:"loancalculator.chartLoaded"},t.LoanCalculatorApp=function(o){this.dispatcher=e({}),this.parentEl=e(o),this.mainView=null,this.loanComparisonValues=null,this.resultsModel=null,this.storageAvailable=!1,this.init=function(t){if(t)this.options=t;else{var n=e.url().param("calc_settings");n&&(n=decodeURI(n),this.options=JSON.parse(n))}var r=614;s.ResponsiveUtil.init(this.parentEl,this.dispatcher,r),this.setupMainView()},this.setupMainView=function(){this.storageAvailable=window.localStorage!=null,this.loanComparisonValues=new n.LoanComparisonValues({commonControlValues:new n.CommonControlValues({}),loanControlsCollection:new n.LoanControlsCollection([I18n.t("defaults.loanDefaults1"),I18n.t("defaults.loanDefaults2")])}),this.resultsModel=new n.ResultsModel,this.apiController=new i.APIController,this.apiController.init(this.loanComparisonValues,this.resultsModel,this.options),this.dispatcher.bind(t.Events.CONTROL_CHANGE,e.proxy(this.controlsChangeHandler,this)),this.initEvents(this.dispatcher),this.mainView=new t.LoanCalculatorView({dispatcher:this.dispatcher,controlsModels:this.loanComparisonValues,resultsModel:this.resultsModel}),this.parentEl.append(this.mainView.$el),this.mainView.render()},this.initEvents=function(n){n.bind(t.Events.CALCULATE,e.proxy(this.calculate_handler,this));var r=this,i=_.debounce(function(){r.calculate(r.loanComparisonValues,r.resultsModel)},50);this.loanComparisonValues.on("change",i),this.loanComparisonValues.get("commonControlValues").on("change",i),this.loanComparisonValues.get("loanControlsCollection").on("change",i)},this.restorePreviousValues=function(){if(this.storageAvailable){var e=this;this.loanComparisonValues.fetch({success:function(){e.mainView.render(),e.calculate(e.loanComparisonValues,e.resultsModel)}})}},this.calculate_handler=function(e,t,n){this.calculate(t,n)},this.calculate=function(e,t){try{var n=this.calculateResults(e);t.set(n)}catch(r){console&&console.log(r)}},this.calculateResults=function(e){var t=new r.LoanRepaymentUtil,n=t.mapControlsToVO(e),i=t.getLoan(n[0]),s=t.getLoan(n[1]),o=t.calculate(i,s);return o},this.controlsChangeHandler=function(){this.storageAvailable&&this.loanComparisonValues.save()},this.getCurrentValues=function(){return this.apiController.getValues()}}}(jQuery);